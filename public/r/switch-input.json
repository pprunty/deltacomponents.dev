{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "switch-input",
  "type": "registry:component",
  "title": "Switch Input",
  "description": "A switch toggle component with validation and label support",
  "dependencies": [
    "zod"
  ],
  "registryDependencies": [
    "switch"
  ],
  "files": [
    {
      "path": "delta/inputs/switch-input.tsx",
      "content": "'use client';\n\nimport * as React from 'react';\nimport { Switch } from '@/components/ui/switch';\nimport { cn } from '@/lib/utils';\nimport type { z } from 'zod';\n\nexport interface SwitchInputProps {\n  /** The label for the switch */\n  label: string;\n  /** The name of the switch field (used for form submission) */\n  name: string;\n  /** Optional description text to display below the switch */\n  description?: string;\n  /** Optional hint text to display below the switch */\n  hint?: string;\n  /** Error message to display (typically from Zod validation) */\n  error?: string;\n  /** Whether the field is required */\n  required?: boolean;\n  /** Whether the field is in a loading/pending state */\n  pending?: boolean;\n  /** Default checked state */\n  defaultChecked?: boolean;\n  /** Controlled checked state */\n  checked?: boolean;\n  /** Container className for the entire component */\n  containerClassName?: string;\n  /** Switch className */\n  switchClassName?: string;\n  /** Label className */\n  labelClassName?: string;\n  /** Label variant - 'default' or 'muted' */\n  labelVariant?: 'default' | 'muted';\n  /** Zod schema for validation (optional - can be handled at the form level) */\n  schema?: z.ZodType<boolean>;\n  /** Callback when validation occurs */\n  onValidate?: (isValid: boolean, value: boolean, error?: string) => void;\n  /** Callback when switch state changes */\n  onCheckedChange?: (checked: boolean) => void;\n  /** ID for the switch */\n  id?: string;\n  /** Whether the switch is disabled */\n  disabled?: boolean;\n}\n\n/**\n * SwitchInput component that integrates with Zod validation\n */\nexport function SwitchInput({\n  label,\n  name,\n  description,\n  hint,\n  error,\n  required = false,\n  pending = false,\n  defaultChecked = false,\n  checked,\n  containerClassName,\n  switchClassName,\n  labelClassName,\n  labelVariant = 'default',\n  schema,\n  onValidate,\n  onCheckedChange,\n  id = name,\n  disabled = false,\n}: SwitchInputProps) {\n  const [localError, setLocalError] = React.useState<string | undefined>(error);\n  const [isChecked, setIsChecked] = React.useState<boolean>(\n    checked !== undefined ? checked : defaultChecked,\n  );\n  const hasError = !!localError || !!error;\n  const errorId = `error-${id}`;\n  const hintId = `hint-${id}`;\n\n  // Update local error when prop changes\n  React.useEffect(() => {\n    setLocalError(error);\n  }, [error]);\n\n  // Update checked state when controlled prop changes\n  React.useEffect(() => {\n    if (checked !== undefined) {\n      setIsChecked(checked);\n    }\n  }, [checked]);\n\n  // Handle validation with the provided schema\n  const validateSwitch = React.useCallback(\n    (value: boolean) => {\n      if (!schema) return;\n\n      const result = schema.safeParse(value);\n      if (!result.success) {\n        const errorMessage =\n          result.error.errors[0]?.message || 'Invalid selection';\n        setLocalError(errorMessage);\n        onValidate?.(false, value, errorMessage);\n      } else {\n        setLocalError(undefined);\n        onValidate?.(true, value);\n      }\n    },\n    [schema, onValidate],\n  );\n\n  // Handle switch change\n  const handleCheckedChange = (checked: boolean) => {\n    setIsChecked(checked);\n\n    // If we have a schema, validate on change\n    if (schema) {\n      validateSwitch(checked);\n    }\n\n    // Call the original onCheckedChange if provided\n    onCheckedChange?.(checked);\n  };\n\n  return (\n    <div\n      className={cn('group/field space-y-2', containerClassName)}\n      data-invalid={hasError}\n    >\n      <div className=\"flex items-center justify-between space-x-2\">\n        <div className=\"space-y-1\">\n          <label\n            htmlFor={id}\n            className={cn(\n              'text-md font-semibold leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 group-data-[invalid=true]/field:text-destructive',\n              labelVariant === 'muted' && 'text-muted-foreground',\n              labelClassName,\n            )}\n          >\n            {label}\n            {required && <span aria-hidden=\"true\"> *</span>}\n          </label>\n          {description && (\n            <p className=\"text-xs text-muted-foreground\">{description}</p>\n          )}\n        </div>\n        <Switch\n          id={id}\n          name={name}\n          defaultChecked={checked === undefined ? defaultChecked : undefined}\n          checked={checked !== undefined ? checked : undefined}\n          disabled={pending || disabled}\n          onCheckedChange={handleCheckedChange}\n          aria-invalid={hasError}\n          aria-errormessage={hasError ? errorId : undefined}\n          aria-describedby={hint ? hintId : undefined}\n          aria-required={required}\n          className={cn(\n            'border border-input/30',\n            'data-[state=checked]:border-primary/30',\n            'group-data-[invalid=true]/field:border-destructive focus-visible:group-data-[invalid=true]/field:ring-destructive',\n            switchClassName,\n          )}\n        />\n      </div>\n\n      {hint && !hasError && (\n        <p id={hintId} className=\"text-xs text-muted-foreground mt-1\">\n          {hint}\n        </p>\n      )}\n\n      {hasError && (\n        <p id={errorId} className=\"text-destructive text-xs\">\n          {localError || error}\n        </p>\n      )}\n\n      {/* Hidden input for form submission */}\n      <input type=\"hidden\" name={name} value={isChecked ? 'true' : 'false'} />\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "delta/inputs/switch-input.tsx"
    },
    {
      "path": "delta/inputs/switch-input-demo.tsx",
      "content": "'use client';\n\nimport { SwitchInput } from './switch-input';\nimport { z } from 'zod';\n\nexport default function SwitchInputDemo() {\n  return (\n    <div className=\"container mx-auto max-w-7xl px-4 py-8 space-y-8\">\n      <DefaultSwitchInputDemo />\n      <ValidationSwitchInputDemo />\n      <MutedLabelSwitchInputDemo />\n      <RequiredSwitchInputDemo />\n      <DisabledSwitchInputDemo />\n      <HintSwitchInputDemo />\n      <DescriptionSwitchInputDemo />\n    </div>\n  );\n}\n\nexport function DefaultSwitchInputDemo() {\n  return (\n    <div className=\"space-y-4\">\n      <h2 className=\"text-lg font-semibold\">Default Switch Input</h2>\n      <div className=\"grid gap-4 md:grid-cols-2\">\n        <SwitchInput label=\"Dark Mode\" name=\"dark-mode\" />\n        <SwitchInput\n          label=\"Notifications\"\n          name=\"notifications\"\n          defaultChecked\n        />\n      </div>\n    </div>\n  );\n}\n\nexport function ValidationSwitchInputDemo() {\n  return (\n    <div className=\"space-y-4\">\n      <h2 className=\"text-lg font-semibold\">With Validation</h2>\n      <div className=\"grid gap-4 md:grid-cols-2\">\n        <SwitchInput\n          label=\"Accept Terms\"\n          name=\"terms-validation\"\n          error=\"You must accept the terms\"\n          schema={z.literal(true, {\n            errorMap: () => ({ message: 'You must accept the terms' }),\n          })}\n        />\n        <SwitchInput\n          label=\"Data Sharing\"\n          name=\"data-sharing-validation\"\n          error=\"Data sharing is required\"\n          schema={z.literal(true, {\n            errorMap: () => ({ message: 'Data sharing is required' }),\n          })}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport function MutedLabelSwitchInputDemo() {\n  return (\n    <div className=\"space-y-4\">\n      <h2 className=\"text-lg font-semibold\">Muted Label Variant</h2>\n      <div className=\"grid gap-4 md:grid-cols-2\">\n        <SwitchInput label=\"Auto-save\" name=\"auto-save\" labelVariant=\"muted\" />\n        <SwitchInput\n          label=\"Sound Effects\"\n          name=\"sound-effects\"\n          labelVariant=\"muted\"\n          defaultChecked\n        />\n      </div>\n    </div>\n  );\n}\n\nexport function RequiredSwitchInputDemo() {\n  return (\n    <div className=\"space-y-4\">\n      <h2 className=\"text-lg font-semibold\">Required Fields</h2>\n      <div className=\"grid gap-4 md:grid-cols-2\">\n        <SwitchInput\n          label=\"Accept Privacy Policy\"\n          name=\"privacy-policy\"\n          required\n        />\n        <SwitchInput label=\"Data Processing\" name=\"data-processing\" required />\n      </div>\n    </div>\n  );\n}\n\nexport function DisabledSwitchInputDemo() {\n  return (\n    <div className=\"space-y-4\">\n      <h2 className=\"text-lg font-semibold\">Disabled State</h2>\n      <div className=\"grid gap-4 md:grid-cols-2\">\n        <SwitchInput label=\"Premium Feature\" name=\"premium-feature\" disabled />\n        <SwitchInput\n          label=\"System Setting\"\n          name=\"system-setting\"\n          disabled\n          defaultChecked\n        />\n      </div>\n    </div>\n  );\n}\n\nexport function HintSwitchInputDemo() {\n  return (\n    <div className=\"space-y-4\">\n      <h2 className=\"text-lg font-semibold\">With Hint Text</h2>\n      <div className=\"grid gap-4 md:grid-cols-2\">\n        <SwitchInput\n          label=\"Two-factor Authentication\"\n          name=\"2fa\"\n          hint=\"Adds an extra layer of security to your account\"\n        />\n        <SwitchInput\n          label=\"Email Notifications\"\n          name=\"email-notifications\"\n          hint=\"Receive important updates via email\"\n        />\n      </div>\n    </div>\n  );\n}\n\nexport function DescriptionSwitchInputDemo() {\n  return (\n    <div className=\"space-y-4\">\n      <h2 className=\"text-lg font-semibold\">With Description</h2>\n      <div className=\"grid gap-4 md:grid-cols-2\">\n        <SwitchInput\n          label=\"Analytics\"\n          name=\"analytics\"\n          description=\"Allow us to collect anonymous usage data to improve our service\"\n        />\n        <SwitchInput\n          label=\"Marketing Communications\"\n          name=\"marketing\"\n          description=\"Receive updates about new features and promotions\"\n        />\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "delta/inputs/switch-input-demo.tsx"
    }
  ]
}