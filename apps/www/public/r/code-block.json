{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "code-block",
  "type": "registry:ui",
  "dependencies": [
    "lucide-react",
    "prism-react-renderer",
    "prismjs"
  ],
  "registryDependencies": [
    "copy-button",
    "tabs"
  ],
  "files": [
    {
      "path": "delta/code-block.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { useEffect, useState } from \"react\"\nimport { TerminalIcon } from \"lucide-react\"\nimport { Highlight } from \"prism-react-renderer\"\nimport type { PrismTheme } from \"prism-react-renderer\"\n\nimport { cn } from \"@/lib/utils\"\nimport { getIconForFile } from \"./code-block-icons\"\nimport { CopyButton } from \"./copy-button\"\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from \"@/components/ui/collapsible\"\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from \"@/components/ui/tabs\"\n\ntype PackageManager = \"npm\" | \"yarn\" | \"pnpm\" | \"bun\"\n\nconst defaultTheme: PrismTheme = {\n  plain: {\n    color: \"#FFFFFF\",\n    backgroundColor: \"#161616\",\n  },\n  styles: [\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"#757575\",\n        fontStyle: \"italic\",\n      },\n    },\n    {\n      types: [\"keyword\", \"property\", \"property-access\", \"attr-name\"],\n      style: {\n        color: \"#77b7d7\",\n      },\n    },\n    {\n      types: [\"tag\"],\n      style: {\n        color: \"#dfab5c\",\n      },\n    },\n    {\n      types: [\"punctuation\", \"symbol\", \"dom\"],\n      style: {\n        color: \"#ffffff\",\n      },\n    },\n    {\n      types: [\"definition\", \"function\"],\n      style: {\n        color: \"#86d9ca\",\n      },\n    },\n    {\n      types: [\"string\", \"char\", \"attr-value\"],\n      style: {\n        color: \"#977cdc\",\n      },\n    },\n    {\n      types: [\"static\", \"number\"],\n      style: {\n        color: \"#ff6658\",\n      },\n    },\n  ],\n}\n\nconst lightTheme: PrismTheme = {\n  plain: {\n    color: \"#24292e\",\n    backgroundColor: \"#ffffff\",\n  },\n  styles: [\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"#8b949e\",\n        fontStyle: \"italic\",\n      },\n    },\n    {\n      types: [\"variable\", \"parameter\"],\n      style: {\n        color: \"#e36209\",\n      },\n    },\n    {\n      types: [\"keyword\", \"builtin\", \"function-definition\"],\n      style: {\n        color: \"#d73a49\",\n      },\n    },\n    {\n      types: [\"property\", \"property-access\", \"attr-name\"],\n      style: {\n        color: \"#005cc5\",\n      },\n    },\n    {\n      types: [\"tag\"],\n      style: {\n        color: \"#22863a\",\n      },\n    },\n    {\n      types: [\"punctuation\", \"symbol\", \"dom\", \"operator\"],\n      style: {\n        color: \"#24292e\",\n      },\n    },\n    {\n      types: [\"function\"],\n      style: {\n        color: \"#6f42c1\",\n      },\n    },\n    {\n      types: [\"class-name\"],\n      style: {\n        color: \"#6f42c1\",\n      },\n    },\n    {\n      types: [\"string\", \"char\", \"attr-value\"],\n      style: {\n        color: \"#032f62\",\n      },\n    },\n    {\n      types: [\"static\", \"number\"],\n      style: {\n        color: \"#005cc5\",\n      },\n    },\n  ],\n}\n\ninterface CodeBlockProps {\n  npm?: string\n  yarn?: string\n  pnpm?: string\n  bun?: string\n  defaultPackageManager?: PackageManager\n  code?: string\n  css?: string\n  language?: string\n  defaultLanguage?: string\n  filename?: string\n  showLineNumbers?: boolean\n  theme?: PrismTheme\n  adaptiveTheme?: {\n    light: PrismTheme\n    dark: PrismTheme\n  }\n  useThemeBackground?: boolean\n  className?: string\n  textClassName?: string\n  scrollbar?: boolean\n  expandable?: boolean\n  defaultExpanded?: boolean\n  collapsedHeight?: string\n}\n\nconst monoFontFamily =\n  'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace'\n\nfunction parseMarkdownCodeBlock(input: string): {\n  code: string\n  language: string | null\n} {\n  const markdownRegex = /^```(\\w+)?\\n?([\\s\\S]*?)```$/\n  const match = input.trim().match(markdownRegex)\n\n  if (match) {\n    return {\n      language: match[1] || null,\n      code: match[2]?.trim() || \"\",\n    }\n  }\n\n  return { code: input, language: null }\n}\n\nconst languageAliases: Record<string, string> = {\n  py: \"python\",\n  js: \"javascript\",\n  ts: \"typescript\",\n  tsx: \"tsx\",\n  jsx: \"jsx\",\n  rb: \"ruby\",\n  rs: \"rust\",\n  sh: \"bash\",\n  shell: \"bash\",\n  yml: \"yaml\",\n  md: \"markdown\",\n}\n\nconst packageManagerCommands: Record<string, PackageManager> = {\n  npx: \"npm\",\n  npm: \"npm\",\n  yarn: \"yarn\",\n  pnpm: \"pnpm\",\n  bunx: \"bun\",\n  bun: \"bun\",\n}\n\nfunction resolveLanguage(lang: string): string {\n  return languageAliases[lang.toLowerCase()] || lang.toLowerCase()\n}\n\nfunction detectPackageManagerFromMarkdown(input: string): {\n  isPackageManager: boolean\n  command: string\n  manager: PackageManager\n} | null {\n  const parsed = parseMarkdownCodeBlock(input)\n  if (!parsed.language) return null\n\n  const lang = parsed.language.toLowerCase()\n  const manager = packageManagerCommands[lang]\n\n  if (manager) {\n    return {\n      isPackageManager: true,\n      command: parsed.code,\n      manager,\n    }\n  }\n\n  return null\n}\n\nfunction convertNpxToPackageManagers(npxCommand: string): {\n  npm: string\n  yarn: string\n  pnpm: string\n  bun: string\n} {\n  // Handle patterns like \"npx shadcn@latest add button\" or just \"shadcn@latest add button\"\n  let command = npxCommand.trim()\n\n  // Remove leading \"npx \" if present\n  if (command.startsWith(\"npx \")) {\n    command = command.slice(4)\n  }\n\n  return {\n    npm: `npx ${command}`,\n    yarn: `yarn dlx ${command}`,\n    pnpm: `pnpm dlx ${command}`,\n    bun: `bunx ${command}`,\n  }\n}\n\nexport function CodeBlock({\n  npm,\n  yarn,\n  pnpm,\n  bun,\n  defaultPackageManager = \"npm\",\n  code,\n  css,\n  language = \"typescript\",\n  defaultLanguage,\n  filename,\n  showLineNumbers = true,\n  theme,\n  adaptiveTheme,\n  useThemeBackground = false,\n  className,\n  textClassName = \"text-[14px]\",\n  scrollbar = true,\n  expandable = false,\n  defaultExpanded = false,\n  collapsedHeight = \"16rem\",\n}: CodeBlockProps) {\n  const [packageManager, setPackageManager] = React.useState<PackageManager>(\n    defaultPackageManager\n  )\n  const [isDark, setIsDark] = useState(false)\n  const [isExpanded, setIsExpanded] = useState(defaultExpanded)\n\n  useEffect(() => {\n    const checkDarkMode = () => {\n      setIsDark(document.documentElement.classList.contains(\"dark\"))\n    }\n\n    checkDarkMode()\n\n    const observer = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        if (\n          mutation.type === \"attributes\" &&\n          mutation.attributeName === \"class\"\n        ) {\n          checkDarkMode()\n        }\n      })\n    })\n\n    observer.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: [\"class\"],\n    })\n\n    return () => observer.disconnect()\n  }, [])\n\n  const commands = React.useMemo(() => {\n    return {\n      npm,\n      yarn,\n      pnpm,\n      bun,\n    }\n  }, [npm, yarn, pnpm, bun])\n\n  const availableCommands = Object.entries(commands).filter(\n    ([, command]) => command\n  )\n\n  const selectedTheme = adaptiveTheme\n    ? isDark\n      ? adaptiveTheme.dark\n      : adaptiveTheme.light\n    : theme || (isDark ? defaultTheme : lightTheme)\n\n  const packageManagerFromMarkdown = code\n    ? detectPackageManagerFromMarkdown(code)\n    : null\n\n  const parsedMarkdown = code ? parseMarkdownCodeBlock(code) : null\n  const actualCode = css || (parsedMarkdown?.code ?? code)\n  const actualLanguage = css\n    ? \"css\"\n    : parsedMarkdown?.language\n      ? resolveLanguage(parsedMarkdown.language)\n      : defaultLanguage || language\n\n  const codeBlockBgColor = useThemeBackground\n    ? selectedTheme.plain?.backgroundColor\n    : \"var(--color-surface)\"\n\n  console.log(\"[v0] codeBlockBgColor:\", codeBlockBgColor)\n  console.log(\"[v0] useThemeBackground:\", useThemeBackground)\n  console.log(\n    \"[v0] selectedTheme.plain?.backgroundColor:\",\n    selectedTheme.plain?.backgroundColor\n  )\n\n  if (packageManagerFromMarkdown) {\n    const { command, manager } = packageManagerFromMarkdown\n    const allCommands = convertNpxToPackageManagers(command)\n\n    return (\n      <div\n        className={cn(\n          \"bg-card text-card-foreground overflow-hidden rounded-lg border\",\n          className\n        )}\n        data-slot=\"tabs\"\n      >\n        <Tabs\n          value={packageManager}\n          className=\"gap-0\"\n          onValueChange={(value) => setPackageManager(value as PackageManager)}\n          defaultValue={manager}\n        >\n          <div\n            className={cn(\n              \"flex items-center justify-between border-b px-3 py-2\",\n              !useThemeBackground && \"bg-surface\"\n            )}\n            style={\n              useThemeBackground\n                ? {\n                    backgroundColor: selectedTheme.plain?.backgroundColor,\n                    color: selectedTheme.plain?.color,\n                  }\n                : undefined\n            }\n          >\n            <div className=\"flex items-center gap-2.5\">\n              <TerminalIcon\n                className=\"text-muted-foreground size-4\"\n                style={\n                  useThemeBackground\n                    ? { color: selectedTheme.plain?.color, opacity: 0.7 }\n                    : undefined\n                }\n              />\n              <TabsList className=\"h-auto rounded-none bg-transparent p-0\">\n                {([\"npm\", \"yarn\", \"pnpm\", \"bun\"] as PackageManager[]).map(\n                  (key) => (\n                    <TabsTrigger\n                      key={key}\n                      value={key}\n                      className={cn(\n                        \"text-muted-foreground data-[state=active]:text-foreground h-7 rounded-md px-2.5 font-medium transition-colors data-[state=active]:bg-transparent data-[state=active]:shadow-none\",\n                        textClassName\n                      )}\n                      style={{\n                        fontFamily: monoFontFamily,\n                        ...(useThemeBackground\n                          ? {\n                              color: selectedTheme.plain?.color,\n                              opacity: 0.7,\n                            }\n                          : {}),\n                      }}\n                    >\n                      {key}\n                    </TabsTrigger>\n                  )\n                )}\n              </TabsList>\n            </div>\n            <CopyButton\n              value={allCommands[packageManager] || allCommands[manager]}\n              className=\"size-7\"\n              variant=\"secondary\"\n              iconColor={\n                useThemeBackground ? selectedTheme.plain?.color : undefined\n              }\n            />\n          </div>\n          <div className={cn(\"overflow-x-auto\", !scrollbar && \"no-scrollbar\")}>\n            {([\"npm\", \"yarn\", \"pnpm\", \"bun\"] as PackageManager[]).map((key) => (\n              <TabsContent key={key} value={key} className=\"mt-0\">\n                <div\n                  className={cn(\n                    \"relative py-4\",\n                    !useThemeBackground && \"bg-surface\"\n                  )}\n                  style={\n                    useThemeBackground\n                      ? {\n                          backgroundColor: selectedTheme.plain?.backgroundColor,\n                        }\n                      : undefined\n                  }\n                >\n                  <Highlight\n                    theme={selectedTheme}\n                    code={allCommands[key]}\n                    language=\"bash\"\n                  >\n                    {({\n                      className: highlightClassName,\n                      style,\n                      tokens,\n                      getLineProps,\n                      getTokenProps,\n                    }) => (\n                      <pre\n                        className={cn(\n                          highlightClassName,\n                          \"w-full overflow-x-auto px-4 leading-relaxed font-medium antialiased\",\n                          textClassName\n                        )}\n                        style={{\n                          ...style,\n                          fontFamily: monoFontFamily,\n                          backgroundColor: useThemeBackground\n                            ? selectedTheme.plain?.backgroundColor\n                            : \"transparent\",\n                          WebkitFontSmoothing: \"antialiased\",\n                          MozOsxFontSmoothing: \"grayscale\",\n                        }}\n                      >\n                        {tokens.map((line, i) => (\n                          <div key={i} {...getLineProps({ line })}>\n                            {line.map((token, key) => (\n                              <span key={key} {...getTokenProps({ token })} />\n                            ))}\n                          </div>\n                        ))}\n                      </pre>\n                    )}\n                  </Highlight>\n                </div>\n              </TabsContent>\n            ))}\n          </div>\n        </Tabs>\n      </div>\n    )\n  }\n\n  if (availableCommands.length > 0) {\n    return (\n      <div\n        className={cn(\n          \"bg-card text-card-foreground overflow-hidden rounded-lg border\",\n          className\n        )}\n        data-slot=\"tabs\"\n      >\n        <Tabs\n          value={packageManager}\n          className=\"gap-0\"\n          onValueChange={(value) => setPackageManager(value as PackageManager)}\n        >\n          <div\n            className={cn(\n              \"flex items-center justify-between border-b px-3 py-2\",\n              !useThemeBackground && \"bg-surface\"\n            )}\n            style={\n              useThemeBackground\n                ? {\n                    backgroundColor: selectedTheme.plain?.backgroundColor,\n                    color: selectedTheme.plain?.color,\n                  }\n                : undefined\n            }\n          >\n            <div className=\"flex items-center gap-2.5\">\n              <TerminalIcon\n                className=\"text-muted-foreground size-4\"\n                style={\n                  useThemeBackground\n                    ? { color: selectedTheme.plain?.color, opacity: 0.7 }\n                    : undefined\n                }\n              />\n              <TabsList className=\"h-auto rounded-none bg-transparent p-0\">\n                {availableCommands.map(([key]) => (\n                  <TabsTrigger\n                    key={key}\n                    value={key}\n                    className={cn(\n                      \"text-muted-foreground data-[state=active]:text-foreground h-7 rounded-md px-2.5 font-medium transition-colors data-[state=active]:bg-transparent data-[state=active]:shadow-none\",\n                      textClassName\n                    )}\n                    style={{\n                      fontFamily: monoFontFamily,\n                      ...(useThemeBackground\n                        ? {\n                            color: selectedTheme.plain?.color,\n                            opacity: 0.7,\n                          }\n                        : {}),\n                    }}\n                  >\n                    {key}\n                  </TabsTrigger>\n                ))}\n              </TabsList>\n            </div>\n            <CopyButton\n              value={commands[packageManager] || \"\"}\n              className=\"size-7\"\n              variant=\"secondary\"\n              iconColor={\n                useThemeBackground ? selectedTheme.plain?.color : undefined\n              }\n            />\n          </div>\n          <div className={cn(\"overflow-x-auto\", !scrollbar && \"no-scrollbar\")}>\n            {availableCommands.map(([key, command]) => (\n              <TabsContent key={key} value={key} className=\"mt-0\">\n                <div\n                  className={cn(\n                    \"relative py-4\",\n                    !useThemeBackground && \"bg-surface\"\n                  )}\n                  style={\n                    useThemeBackground\n                      ? {\n                          backgroundColor: selectedTheme.plain?.backgroundColor,\n                        }\n                      : undefined\n                  }\n                >\n                  <Highlight\n                    theme={selectedTheme}\n                    code={command || \"\"}\n                    language=\"bash\"\n                  >\n                    {({\n                      className: highlightClassName,\n                      style,\n                      tokens,\n                      getLineProps,\n                      getTokenProps,\n                    }) => (\n                      <pre\n                        className={cn(\n                          highlightClassName,\n                          \"w-full overflow-x-auto px-4 leading-relaxed font-medium antialiased\",\n                          textClassName\n                        )}\n                        style={{\n                          ...style,\n                          fontFamily: monoFontFamily,\n                          backgroundColor: useThemeBackground\n                            ? selectedTheme.plain?.backgroundColor\n                            : \"transparent\",\n                          WebkitFontSmoothing: \"antialiased\",\n                          MozOsxFontSmoothing: \"grayscale\",\n                        }}\n                      >\n                        {tokens.map((line, i) => (\n                          <div key={i} {...getLineProps({ line })}>\n                            {line.map((token, key) => (\n                              <span key={key} {...getTokenProps({ token })} />\n                            ))}\n                          </div>\n                        ))}\n                      </pre>\n                    )}\n                  </Highlight>\n                </div>\n              </TabsContent>\n            ))}\n          </div>\n        </Tabs>\n      </div>\n    )\n  }\n\n  if (actualCode) {\n    const codeBlockContent = (\n      <div\n        className={cn(\n          \"border-border pointer-events-auto w-full max-w-full overflow-hidden rounded-lg border\",\n          className\n        )}\n        style={{ \"--code-block-bg\": codeBlockBgColor } as React.CSSProperties}\n      >\n        {filename && (\n          <figcaption\n            className={cn(\n              \"flex items-center justify-between border-b px-4 py-2.5 [&_svg]:size-4\",\n              !useThemeBackground && \"bg-surface\"\n            )}\n            style={{\n              fontFamily: monoFontFamily,\n              ...(useThemeBackground\n                ? {\n                    backgroundColor: selectedTheme.plain?.backgroundColor,\n                    color: selectedTheme.plain?.color,\n                  }\n                : {}),\n            }}\n          >\n            <div\n              className={cn(\n                \"text-foreground/75 flex items-center gap-2\",\n                textClassName\n              )}\n            >\n              {getIconForFile(filename)}\n              <span className=\"font-medium tracking-tight\">{filename}</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              {expandable && (\n                <>\n                  <CollapsibleTrigger asChild>\n                    <button\n                      className={cn(\n                        \"text-muted-foreground hover:text-foreground font-medium tracking-tight transition-colors\",\n                        textClassName\n                      )}\n                      style={{ fontFamily: monoFontFamily }}\n                    >\n                      {isExpanded ? \"Collapse\" : \"Expand\"}\n                    </button>\n                  </CollapsibleTrigger>\n                  <span className=\"text-muted-foreground/50\">|</span>\n                </>\n              )}\n              <CopyButton\n                value={actualCode}\n                iconColor={\n                  useThemeBackground ? selectedTheme.plain?.color : undefined\n                }\n              />\n            </div>\n          </figcaption>\n        )}\n\n        <div className=\"relative\">\n          {!filename && (\n            <div className=\"pointer-events-none sticky top-0 z-10 flex h-0 justify-end\">\n              <div className=\"pointer-events-auto flex items-center gap-2\">\n                {expandable && (\n                  <>\n                    <CollapsibleTrigger asChild>\n                      <button\n                        className={cn(\n                          \"text-muted-foreground hover:text-foreground font-semibold tracking-tight transition-colors\",\n                          textClassName\n                        )}\n                        style={{ fontFamily: monoFontFamily }}\n                      >\n                        {isExpanded ? \"Collapse\" : \"Expand\"}\n                      </button>\n                    </CollapsibleTrigger>\n                    <span className=\"text-muted-foreground/50\">|</span>\n                  </>\n                )}\n                <CopyButton\n                  value={actualCode}\n                  iconColor={\n                    useThemeBackground ? selectedTheme.plain?.color : undefined\n                  }\n                />\n              </div>\n            </div>\n          )}\n\n          {expandable ? (\n            <CollapsibleContent\n              forceMount\n              className={cn(\n                \"relative w-full overflow-auto transition-all\",\n                !scrollbar && \"no-scrollbar\"\n              )}\n              style={{\n                backgroundColor: \"var(--code-block-bg)\",\n                maxHeight: isExpanded ? \"none\" : collapsedHeight,\n              }}\n            >\n              <Highlight\n                theme={selectedTheme}\n                code={actualCode.trim()}\n                language={actualLanguage}\n              >\n                {({\n                  className: highlightClassName,\n                  style,\n                  tokens,\n                  getLineProps,\n                  getTokenProps,\n                }) => (\n                  <pre\n                    className={cn(\n                      highlightClassName,\n                      \"min-w-0 py-3.5 outline-none\",\n                      \"leading-6 font-medium antialiased\",\n                      textClassName\n                    )}\n                    style={{\n                      ...style,\n                      fontFamily: monoFontFamily,\n                      backgroundColor: \"transparent\",\n                      WebkitFontSmoothing: \"antialiased\",\n                      MozOsxFontSmoothing: \"grayscale\",\n                    }}\n                  >\n                    {tokens.map((line, i) => (\n                      <div\n                        key={i}\n                        {...getLineProps({ line })}\n                        className=\"flex min-h-[24px]\"\n                      >\n                        {showLineNumbers && (\n                          <span\n                            className={cn(\n                              \"sticky left-0 z-10 flex-none text-right font-medium tabular-nums select-none\",\n                              textClassName\n                            )}\n                            style={{\n                              fontFamily: monoFontFamily,\n                              color: selectedTheme.plain?.color\n                                ? `color-mix(in srgb, ${selectedTheme.plain.color} 35%, transparent)`\n                                : \"rgba(128, 128, 128, 0.35)\",\n                              backgroundColor: \"var(--code-block-bg)\",\n                              width: \"4rem\",\n                              paddingLeft: \"1.5rem\",\n                              paddingRight: \"1.5rem\",\n                            }}\n                          >\n                            {i + 1}\n                          </span>\n                        )}\n                        <span\n                          className={cn(\n                            \"flex-1 pr-6 whitespace-pre\",\n                            !showLineNumbers && \"pl-6\"\n                          )}\n                        >\n                          {line.map((token, key) => (\n                            <span key={key} {...getTokenProps({ token })} />\n                          ))}\n                        </span>\n                      </div>\n                    ))}\n                  </pre>\n                )}\n              </Highlight>\n            </CollapsibleContent>\n          ) : (\n            <div\n              className={cn(\n                \"relative max-h-[450px] w-full overflow-auto\",\n                !scrollbar && \"no-scrollbar\"\n              )}\n              style={{ backgroundColor: \"var(--code-block-bg)\" }}\n            >\n              <Highlight\n                theme={selectedTheme}\n                code={actualCode.trim()}\n                language={actualLanguage}\n              >\n                {({\n                  className: highlightClassName,\n                  style,\n                  tokens,\n                  getLineProps,\n                  getTokenProps,\n                }) => (\n                  <pre\n                    className={cn(\n                      highlightClassName,\n                      \"min-w-0 py-3.5 outline-none\",\n                      \"leading-6 font-medium antialiased\",\n                      textClassName\n                    )}\n                    style={{\n                      ...style,\n                      fontFamily: monoFontFamily,\n                      backgroundColor: \"transparent\",\n                      WebkitFontSmoothing: \"antialiased\",\n                      MozOsxFontSmoothing: \"grayscale\",\n                    }}\n                  >\n                    {tokens.map((line, i) => (\n                      <div\n                        key={i}\n                        {...getLineProps({ line })}\n                        className=\"flex min-h-[24px]\"\n                      >\n                        {showLineNumbers && (\n                          <span\n                            className={cn(\n                              \"sticky left-0 z-10 flex-none text-right font-medium tabular-nums select-none\",\n                              textClassName\n                            )}\n                            style={{\n                              fontFamily: monoFontFamily,\n                              color: selectedTheme.plain?.color\n                                ? `color-mix(in srgb, ${selectedTheme.plain.color} 35%, transparent)`\n                                : \"rgba(128, 128, 128, 0.35)\",\n                              backgroundColor: \"var(--code-block-bg)\",\n                              width: \"4rem\",\n                              paddingLeft: \"1.5rem\",\n                              paddingRight: \"1.5rem\",\n                            }}\n                          >\n                            {i + 1}\n                          </span>\n                        )}\n                        <span\n                          className={cn(\n                            \"flex-1 pr-6 whitespace-pre\",\n                            !showLineNumbers && \"pl-6\"\n                          )}\n                        >\n                          {line.map((token, key) => (\n                            <span key={key} {...getTokenProps({ token })} />\n                          ))}\n                        </span>\n                      </div>\n                    ))}\n                  </pre>\n                )}\n              </Highlight>\n            </div>\n          )}\n\n          {expandable && !isExpanded && (\n            <CollapsibleTrigger\n              className=\"absolute inset-x-0 bottom-0 z-20 flex h-16 items-end justify-center rounded-b-lg pb-2 text-sm\"\n              style={{\n                background: `linear-gradient(to bottom, transparent, ${useThemeBackground && selectedTheme.plain?.backgroundColor ? selectedTheme.plain.backgroundColor : \"var(--surface)\"})`,\n                color: selectedTheme.plain?.color,\n              }}\n            >\n              <span className=\"text-muted-foreground hover:text-foreground text-base font-normal transition-colors\">\n                Expand\n              </span>\n            </CollapsibleTrigger>\n          )}\n        </div>\n      </div>\n    )\n\n    if (expandable) {\n      return (\n        <Collapsible\n          open={isExpanded}\n          onOpenChange={setIsExpanded}\n          className=\"group/collapsible relative\"\n        >\n          {codeBlockContent}\n        </Collapsible>\n      )\n    }\n\n    return codeBlockContent\n  }\n\n  return null\n}\n",
      "type": "registry:ui"
    },
    {
      "path": "delta/code-block-icons.tsx",
      "content": "import type React from \"react\"\n\ntype IconProps = React.HTMLAttributes<SVGElement>\n\nexport const Icons = {\n  ts: (props: IconProps) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 0 1 1.306.34v2.458a3.95 3.95 0 0 0-.643-.361 5.093 5.093 0 0 0-.717-.26 5.453 5.453 0 0 0-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 0 0-.623.242c-.17.104-.3.229-.393.374a.888.888 0 0 0-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 0 1-1.012 1.085 4.38 4.38 0 0 1-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 0 1-1.84-.164 5.544 5.544 0 0 1-1.512-.493v-2.63a5.033 5.033 0 0 0 3.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 0 0-.074-1.089 2.12 2.12 0 0 0-.537-.5 5.597 5.597 0 0 0-.807-.444 27.72 27.72 0 0 0-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 0 1 1.47-.629 7.536 7.536 0 0 1 1.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z\"\n      />\n    </svg>\n  ),\n  css: (props: IconProps) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M1.5 0h21l-1.91 21.563L11.977 24l-8.565-2.438L1.5 0zm17.09 4.413L5.41 4.41l.213 2.622 10.125.002-.255 2.716h-6.64l.24 2.573h6.182l-.366 3.523-2.91.804-2.956-.81-.188-2.11h-2.61l.29 3.855L12 19.288l5.373-1.53L18.59 4.414z\"\n      />\n    </svg>\n  ),\n  json: (props: IconProps) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M5.759 3.975h1.783V5.76H5.759v4.458A1.783 1.783 0 0 1 3.975 12a1.783 1.783 0 0 1 1.784 1.783v4.459h1.783v1.783H5.759c-.954-.24-1.784-.803-1.784-1.783v-3.567a1.783 1.783 0 0 0-1.783-1.783H.975v-1.783h1.217a1.783 1.783 0 0 0 1.783-1.784V5.76c0-.98.83-1.543 1.784-1.784m12.482 0c.954.24 1.784.803 1.784 1.783v3.567a1.783 1.783 0 0 0 1.783 1.783h1.217v1.784h-1.217a1.783 1.783 0 0 0-1.783 1.783v3.567c0 .98-.83 1.543-1.784 1.783h-1.783v-1.783h1.783v-4.459A1.783 1.783 0 0 1 20.025 12a1.783 1.783 0 0 1-1.784-1.783V5.759h-1.783V3.975z\"\n      />\n    </svg>\n  ),\n  python: (props: IconProps) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M11.914 0C5.82 0 6.2 2.656 6.2 2.656l.007 2.752h5.814v.826H3.9S0 5.789 0 11.969c0 6.18 3.403 5.96 3.403 5.96h2.03v-2.867s-.109-3.42 3.35-3.42h5.766s3.24.052 3.24-3.148V3.202S18.28 0 11.914 0M8.708 1.85c.578 0 1.046.47 1.046 1.052 0 .581-.468 1.051-1.046 1.051-.579 0-1.046-.47-1.046-1.051 0-.582.467-1.052 1.046-1.052\"\n      />\n      <path\n        fill=\"currentColor\"\n        d=\"M12.086 24c6.094 0 5.714-2.656 5.714-2.656l-.007-2.752h-5.814v-.826h8.121s3.9.445 3.9-5.735c0-6.18-3.403-5.96-3.403-5.96h-2.03v2.867s.109 3.42-3.35 3.42H9.451s-3.24-.052-3.24 3.148v5.292S5.72 24 12.086 24m3.206-1.85c-.578 0-1.046-.47-1.046-1.052 0-.581.468-1.051 1.046-1.051.579 0 1.046.47 1.046 1.051 0 .582-.467 1.052-1.046 1.052\"\n      />\n    </svg>\n  ),\n  rust: (props: IconProps) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-.5 4.5h1v2h-1zm-4.25.75.7.7-1.4 1.4-.7-.7zm9.5 0 1.4 1.4-.7.7-1.4-1.4zM12 7a5 5 0 0 1 5 5h-2a3 3 0 0 0-6 0H7a5 5 0 0 1 5-5zm-7.5 4.5h2v1h-2zm15 0h2v1h-2zm-13.25 4.25.7-.7 1.4 1.4-.7.7zm11.5 0 1.4 1.4-.7.7-1.4-1.4zM11.5 17.5h1v2h-1z\"\n      />\n    </svg>\n  ),\n  bash: (props: IconProps) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M21.038 4.9 13.461.402a2.86 2.86 0 0 0-2.923.001L2.961 4.9A3.023 3.023 0 0 0 1.5 7.503v8.995c0 1.073.557 2.066 1.462 2.603l7.577 4.497a2.86 2.86 0 0 0 2.922 0l7.577-4.497a3.023 3.023 0 0 0 1.462-2.603V7.503A3.021 3.021 0 0 0 21.038 4.9z\"\n      />\n    </svg>\n  ),\n  html: (props: IconProps) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M1.5 0h21l-1.91 21.563L11.977 24l-8.564-2.438L1.5 0Zm7.031 9.75-.232-2.718 10.059.003.23-2.622L5.412 4.41l.698 8.01h9.126l-.326 3.426-2.91.804-2.955-.81-.188-2.11H6.248l.33 4.171L12 19.351l5.379-1.443.744-8.157H8.531Z\"\n      />\n    </svg>\n  ),\n  react: (props: IconProps) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38a2.167 2.167 0 0 0-1.092-.278z\"\n      />\n    </svg>\n  ),\n  go: (props: IconProps) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M1.811 10.715c-.047 0-.058-.024-.035-.059l.246-.316c.024-.035.078-.059.129-.059h4.17c.047 0 .058.035.035.07l-.199.305c-.02.035-.082.07-.117.07zm-1.35 1.073c-.047 0-.058-.023-.035-.058l.246-.316c.023-.035.082-.059.129-.059h5.328c.047 0 .07.035.059.07l-.094.28c-.012.046-.059.07-.106.07zm2.156 1.074c-.047 0-.058-.035-.035-.07l.164-.293c.023-.035.07-.07.117-.07h2.337c.047 0 .07.035.07.082l-.023.281c0 .047-.047.082-.082.082zM15.004 10.505c-.735.188-1.239.328-1.963.516-.176.047-.188.059-.34-.117-.176-.199-.305-.328-.551-.445-.738-.363-1.452-.258-2.115.176-.797.516-1.207 1.276-1.195 2.22.012.938.657 1.708 1.582 1.836.797.106 1.464-.164 1.992-.773.106-.129.2-.27.317-.434h-2.258c-.246 0-.305-.152-.223-.352.152-.363.434-.973.598-1.276.047-.082.14-.188.293-.188h4.253c-.024.317-.024.633-.07.95-.118.809-.4 1.558-.856 2.226-.703 1.027-1.64 1.734-2.844 2.033-1.002.246-1.968.176-2.868-.293-.856-.446-1.441-1.123-1.758-2.015-.363-1.027-.317-2.033.129-3.001.504-1.095 1.301-1.898 2.396-2.391 1.002-.445 2.045-.527 3.118-.258.797.199 1.476.61 2.01 1.229.164.199.305.41.48.656h.012zM18.989 16.847c-.925-.012-1.78-.27-2.52-.833-.633-.48-1.038-1.1-1.16-1.874-.176-1.12.152-2.092.867-2.938.668-.797 1.523-1.289 2.555-1.464 1.003-.164 1.945-.023 2.808.539.75.492 1.254 1.158 1.43 2.057.222 1.27-.118 2.32-.949 3.236-.609.68-1.37 1.135-2.25 1.265-.422.07-.845.07-1.278.082z\"\n      />\n    </svg>\n  ),\n  markdown: (props: IconProps) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M102 366C88 366 76 354 76 340V170c0-14 12-26 26-26h307c14 0 26 12 26 26v170c0 14-11 26-25 26zM102 162c-4 0-9 4-9 9v170c0 5 4 9 9 9h307c5 0 9-4 9-9V170c0-5-4-9-9-9H102zm26 153V196h34l34 43 34-43h35v119h-34v-68l-34 43-34-43v68zm216 0-52-57h34v-61h34v60h34z\"\n      />\n    </svg>\n  ),\n  file: (props: IconProps) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\"\n      />\n      <polyline\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        points=\"14 2 14 8 20 8\"\n      />\n    </svg>\n  ),\n}\n\nexport function getIconForFile(filename: string) {\n  const extension = filename.split(\".\").pop()?.toLowerCase()\n\n  switch (extension) {\n    case \"json\":\n      return <Icons.json className=\"size-4 fill-current\" />\n    case \"css\":\n      return <Icons.css className=\"size-4 fill-current\" />\n    case \"ts\":\n    case \"tsx\":\n    case \"typescript\":\n      return <Icons.ts className=\"size-4 fill-current\" />\n    case \"js\":\n    case \"jsx\":\n      return <Icons.react className=\"size-4 fill-current\" />\n    case \"py\":\n    case \"python\":\n      return <Icons.python className=\"size-4 fill-current\" />\n    case \"rs\":\n    case \"rust\":\n      return <Icons.rust className=\"size-4 fill-current\" />\n    case \"sh\":\n    case \"bash\":\n    case \"zsh\":\n      return <Icons.bash className=\"size-4 fill-current\" />\n    case \"html\":\n    case \"htm\":\n      return <Icons.html className=\"size-4 fill-current\" />\n    case \"go\":\n      return <Icons.go className=\"size-4 fill-current\" />\n    case \"md\":\n    case \"mdx\":\n      return <Icons.markdown className=\"size-4 fill-current\" />\n    default:\n      return <Icons.file className=\"size-4\" />\n  }\n}\n",
      "type": "registry:ui"
    }
  ]
}