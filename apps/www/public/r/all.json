{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "all",
  "type": "registry:ui",
  "description": "All UI components from Delta UI",
  "dependencies": [
    "cambio",
    "framer-motion",
    "lucide-react",
    "motion",
    "prism-react-renderer",
    "qr-code-styling",
    "streamdown",
    "swiper"
  ],
  "registryDependencies": [
    "avatar",
    "button",
    "copy-button",
    "dropdown-menu",
    "textarea",
    "tooltip",
    "x-scrollable"
  ],
  "files": [
    {
      "path": "delta/code-block.tsx",
      "type": "registry:ui",
      "target": "",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { useEffect, useState } from \"react\"\nimport { TerminalIcon } from \"lucide-react\"\nimport { Highlight, PrismTheme } from \"prism-react-renderer\"\n\nimport { cn } from \"@/lib/utils\"\nimport { CopyButton } from \"@/registry/delta-ui/delta/copy-button\"\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from \"@/registry/shadcn/tabs\"\n\ntype PackageManager = \"npm\" | \"yarn\" | \"pnpm\" | \"bun\"\n\n// Inline theme definitions\nconst defaultTheme: PrismTheme = {\n  plain: {\n    color: \"#FFFFFF\",\n    backgroundColor: \"#161616\",\n  },\n  styles: [\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"#757575\",\n        fontStyle: \"italic\",\n      },\n    },\n    {\n      types: [\"keyword\", \"property\", \"property-access\", \"attr-name\"],\n      style: {\n        color: \"#77b7d7\",\n      },\n    },\n    {\n      types: [\"tag\"],\n      style: {\n        color: \"#dfab5c\",\n      },\n    },\n    {\n      types: [\"punctuation\", \"symbol\", \"dom\"],\n      style: {\n        color: \"#ffffff\",\n      },\n    },\n    {\n      types: [\"definition\", \"function\"],\n      style: {\n        color: \"#86d9ca\",\n      },\n    },\n    {\n      types: [\"string\", \"char\", \"attr-value\"],\n      style: {\n        color: \"#977cdc\",\n      },\n    },\n    {\n      types: [\"static\", \"number\"],\n      style: {\n        color: \"#ff6658\",\n      },\n    },\n  ],\n}\n\nconst lightTheme: PrismTheme = {\n  plain: {\n    color: \"#24292e\",\n    backgroundColor: \"#F9F9F9\",\n  },\n  styles: [\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"#8b949e\",\n        fontStyle: \"italic\",\n      },\n    },\n    {\n      types: [\"variable\", \"parameter\"],\n      style: {\n        color: \"#e36209\",\n      },\n    },\n    {\n      types: [\"keyword\", \"builtin\", \"function-definition\"],\n      style: {\n        color: \"#d73a49\",\n      },\n    },\n    {\n      types: [\"property\", \"property-access\", \"attr-name\"],\n      style: {\n        color: \"#005cc5\",\n      },\n    },\n    {\n      types: [\"tag\"],\n      style: {\n        color: \"#22863a\",\n      },\n    },\n    {\n      types: [\"punctuation\", \"symbol\", \"dom\", \"operator\"],\n      style: {\n        color: \"#24292e\",\n      },\n    },\n    {\n      types: [\"function\"],\n      style: {\n        color: \"#6f42c1\",\n      },\n    },\n    {\n      types: [\"class-name\"],\n      style: {\n        color: \"#6f42c1\",\n      },\n    },\n    {\n      types: [\"string\", \"char\", \"attr-value\"],\n      style: {\n        color: \"#032f62\",\n      },\n    },\n    {\n      types: [\"static\", \"number\"],\n      style: {\n        color: \"#005cc5\",\n      },\n    },\n  ],\n}\n\ninterface CodeBlockProps {\n  // Package manager commands\n  npm?: string\n  yarn?: string\n  pnpm?: string\n  bun?: string\n  defaultPackageManager?: PackageManager\n\n  // Code highlighting props\n  code?: string\n  language?: string\n  filename?: string\n  showLineNumbers?: boolean\n  theme?: PrismTheme\n  adaptiveTheme?: {\n    light: PrismTheme\n    dark: PrismTheme\n  }\n\n  className?: string\n}\n\nexport function CodeBlock({\n  npm,\n  yarn,\n  pnpm,\n  bun,\n  defaultPackageManager = \"npm\",\n  code,\n  language = \"typescript\",\n  filename,\n  showLineNumbers = true,\n  theme,\n  adaptiveTheme,\n  className,\n}: CodeBlockProps) {\n  const [packageManager, setPackageManager] = React.useState<PackageManager>(\n    defaultPackageManager\n  )\n  const [isDark, setIsDark] = useState(false)\n\n  // Hook to detect dark mode\n  useEffect(() => {\n    const checkDarkMode = () => {\n      setIsDark(document.documentElement.classList.contains(\"dark\"))\n    }\n\n    checkDarkMode()\n\n    const observer = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        if (\n          mutation.type === \"attributes\" &&\n          mutation.attributeName === \"class\"\n        ) {\n          checkDarkMode()\n        }\n      })\n    })\n\n    observer.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: [\"class\"],\n    })\n\n    return () => observer.disconnect()\n  }, [])\n\n  const commands = React.useMemo(() => {\n    return {\n      npm,\n      yarn,\n      pnpm,\n      bun,\n    }\n  }, [npm, yarn, pnpm, bun])\n\n  const availableCommands = Object.entries(commands).filter(\n    ([, command]) => command\n  )\n\n  // Select theme based on adaptiveTheme prop or auto-detect light/dark mode\n  const selectedTheme = adaptiveTheme\n    ? isDark\n      ? adaptiveTheme.dark\n      : adaptiveTheme.light\n    : theme || (isDark ? defaultTheme : lightTheme)\n\n  // Use the theme's text foreground color for the copy button\n  const iconColor = selectedTheme.plain?.color || \"#000000\"\n\n  // If we have package manager commands, show the tabbed interface\n  if (availableCommands.length > 0) {\n    return (\n      <div\n        className={cn(\n          \"bg-card text-card-foreground overflow-x-auto rounded-lg border\",\n          className\n        )}\n        data-slot=\"tabs\"\n      >\n        <Tabs\n          value={packageManager}\n          className=\"gap-0\"\n          onValueChange={(value) => setPackageManager(value as PackageManager)}\n        >\n          <div className=\"bg-secondary flex items-center gap-2 border-b px-3 py-1\">\n            <div className=\"bg-foreground flex size-4 items-center justify-center rounded-[1px] opacity-70\">\n              <TerminalIcon className=\"text-code size-3\" />\n            </div>\n            <TabsList className=\"rounded-none bg-transparent p-0\">\n              {availableCommands.map(([key]) => (\n                <TabsTrigger\n                  key={key}\n                  value={key}\n                  className=\"data-[state=active]:border-primary h-7 rounded-none border-0 pt-0.5 data-[state=active]:border-b-2 data-[state=active]:bg-transparent data-[state=active]:shadow-none\"\n                >\n                  {key}\n                </TabsTrigger>\n              ))}\n            </TabsList>\n          </div>\n          <div className=\"no-scrollbar overflow-x-auto\">\n            {availableCommands.map(([key, command]) => (\n              <TabsContent key={key} value={key} className=\"mt-0\">\n                <div\n                  className=\"relative py-4\"\n                  style={{\n                    backgroundColor: selectedTheme.plain?.backgroundColor,\n                  }}\n                >\n                  <Highlight\n                    theme={selectedTheme}\n                    code={command || \"\"}\n                    language=\"bash\"\n                  >\n                    {({\n                      className: highlightClassName,\n                      style,\n                      tokens,\n                      getLineProps,\n                      getTokenProps,\n                    }) => (\n                      <pre\n                        className={`${highlightClassName} w-full overflow-x-auto px-4 font-mono text-sm leading-relaxed font-medium`}\n                        style={{\n                          ...style,\n                          fontSize: className?.includes(\"text-lg\")\n                            ? \"1.125rem\"\n                            : className?.includes(\"text-base\")\n                              ? \"1rem\"\n                              : undefined,\n                        }}\n                      >\n                        {tokens.map((line, i) => (\n                          <div key={i} {...getLineProps({ line })}>\n                            {line.map((token, key) => (\n                              <span key={key} {...getTokenProps({ token })} />\n                            ))}\n                          </div>\n                        ))}\n                      </pre>\n                    )}\n                  </Highlight>\n                </div>\n              </TabsContent>\n            ))}\n          </div>\n        </Tabs>\n        <CopyButton\n          value={commands[packageManager] || \"\"}\n          className=\"absolute top-2 right-2 z-10 size-7 opacity-70 hover:opacity-100 focus-visible:opacity-100\"\n          iconColor={iconColor}\n        />\n      </div>\n    )\n  }\n\n  // If we have code to highlight, show the syntax highlighted version\n  if (code) {\n    return (\n      <div\n        className={cn(\n          \"border-border pointer-events-auto w-full max-w-full overflow-x-auto overflow-y-hidden rounded-sm border\",\n          className\n        )}\n      >\n        {filename && (\n          <div className=\"bg-secondary flex items-center justify-between border-b\">\n            <div className=\"flex items-center gap-2 px-3 py-1\">\n              <div className=\"bg-foreground flex size-4 items-center justify-center rounded-[1px] opacity-70\">\n                <TerminalIcon className=\"text-code size-3\" />\n              </div>\n              <span className=\"text-sm font-medium\">{filename}</span>\n            </div>\n            <CopyButton value={code} className=\"mr-3\" iconColor={iconColor} />\n          </div>\n        )}\n\n        <div\n          className=\"relative max-h-[calc(530px-44px)] w-full py-4\"\n          style={{\n            backgroundColor: selectedTheme.plain?.backgroundColor,\n          }}\n        >\n          {!filename && (\n            <div className=\"absolute top-4 right-3\">\n              <CopyButton value={code} iconColor={iconColor} />\n            </div>\n          )}\n\n          <Highlight\n            theme={selectedTheme}\n            code={code.trim()}\n            language={language}\n          >\n            {({\n              className: highlightClassName,\n              style,\n              tokens,\n              getLineProps,\n              getTokenProps,\n            }) => (\n              <pre\n                className={`${highlightClassName} thin-scrollbar max-h-[calc(530px-88px)] w-full overflow-x-auto overflow-y-auto font-mono text-sm leading-relaxed font-medium`}\n                style={{\n                  ...style,\n                  fontSize: className?.includes(\"text-lg\")\n                    ? \"1.125rem\"\n                    : className?.includes(\"text-base\")\n                      ? \"1rem\"\n                      : undefined,\n                  scrollbarWidth: \"thin\",\n                  scrollbarColor:\n                    selectedTheme.plain?.backgroundColor?.toLowerCase() ===\n                      \"#ffffff\" ||\n                    selectedTheme.plain?.backgroundColor === \"#FAFAFA\"\n                      ? \"#d1d5db transparent\"\n                      : \"#4b5563 transparent\",\n                }}\n              >\n                {tokens.map((line, i) => (\n                  <div\n                    key={i}\n                    {...getLineProps({ line })}\n                    className=\"flex items-center px-4 py-px\"\n                  >\n                    {showLineNumbers && (\n                      <span\n                        className=\"mr-4 flex items-center text-right text-sm select-none\"\n                        style={{\n                          color:\n                            selectedTheme.plain?.backgroundColor ===\n                              \"#FFFFFF\" ||\n                            selectedTheme.plain?.backgroundColor === \"#FAFAFA\"\n                              ? \"#999999\"\n                              : \"#757575\",\n                          minWidth: \"1.5rem\",\n                          fontSize: className?.includes(\"text-lg\")\n                            ? \"1.125rem\"\n                            : className?.includes(\"text-base\")\n                              ? \"1rem\"\n                              : undefined,\n                        }}\n                      >\n                        {i + 1}\n                      </span>\n                    )}\n                    <span className={!showLineNumbers ? \"ml-0\" : \"\"}>\n                      {line.map((token, key) => (\n                        <span key={key} {...getTokenProps({ token })} />\n                      ))}\n                    </span>\n                  </div>\n                ))}\n              </pre>\n            )}\n          </Highlight>\n        </div>\n      </div>\n    )\n  }\n\n  // Return null if no content\n  return null\n}\n"
    },
    {
      "path": "delta/copy-button.tsx",
      "type": "registry:ui",
      "target": "",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { CheckIcon, ClipboardIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/registry/shadcn/button\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from \"@/registry/shadcn/tooltip\"\n\nexport function copyToClipboard(value: string) {\n  navigator.clipboard.writeText(value)\n}\n\ninterface CopyButtonProps extends React.ComponentProps<typeof Button> {\n  value: string\n  variant?:\n    | \"ghost\"\n    | \"outline\"\n    | \"secondary\"\n    | \"default\"\n    | \"destructive\"\n    | \"link\"\n  iconColor?: string\n}\n\nexport function CopyButton({\n  value,\n  className,\n  variant = \"ghost\",\n  iconColor,\n  ...props\n}: CopyButtonProps) {\n  const [hasCopied, setHasCopied] = React.useState(false)\n\n  React.useEffect(() => {\n    if (hasCopied) {\n      const timer = setTimeout(() => {\n        setHasCopied(false)\n      }, 2000)\n      return () => clearTimeout(timer)\n    }\n  }, [hasCopied])\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>\n        <Button\n          data-slot=\"copy-button\"\n          size=\"icon\"\n          variant={variant}\n          className={cn(\n            \"size-7 hover:opacity-100 focus-visible:opacity-100\",\n            className\n          )}\n          onClick={() => {\n            copyToClipboard(value)\n            setHasCopied(true)\n          }}\n          {...props}\n        >\n          <span className=\"sr-only\">Copy</span>\n          {hasCopied ? (\n            <CheckIcon style={iconColor ? { color: iconColor } : {}} />\n          ) : (\n            <ClipboardIcon style={iconColor ? { color: iconColor } : {}} />\n          )}\n        </Button>\n      </TooltipTrigger>\n      <TooltipContent>\n        {hasCopied ? \"Copied\" : \"Copy to Clipboard\"}\n      </TooltipContent>\n    </Tooltip>\n  )\n}\n"
    },
    {
      "path": "delta/cambio-image.tsx",
      "type": "registry:ui",
      "target": "",
      "content": "\"use client\"\n\nimport { useEffect, useRef, useState } from \"react\"\nimport { Cambio } from \"cambio\"\n\nimport { cn } from \"@/lib/utils\"\n\ntype MotionPreset = \"snappy\" | \"smooth\" | \"bouncy\" | \"reduced\"\n\ninterface CambioImageProps {\n  src: string\n  alt: string\n  width: number\n  height: number\n  loading?: \"lazy\" | \"eager\"\n  index?: number\n  motion?:\n    | MotionPreset\n    | {\n        trigger?: MotionPreset\n        popup?: MotionPreset\n        backdrop?: MotionPreset\n      }\n  dismissible?: boolean\n  className?: string\n  draggable?: boolean\n  enableInitialAnimation?: boolean\n  dismissOnImageClick?: boolean\n}\n\nexport function CambioImage({\n  src,\n  alt,\n  width,\n  height,\n  loading = \"lazy\",\n  index = 0,\n  motion = \"snappy\",\n  dismissible = false,\n  className,\n  draggable = false,\n  enableInitialAnimation = true,\n  dismissOnImageClick = false,\n}: CambioImageProps) {\n  const [isVisible, setIsVisible] = useState(false)\n\n  /* NEW â€” track the zoom state */\n  const [open, setOpen] = useState(false)\n  const ref = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    if (!enableInitialAnimation) {\n      setIsVisible(true)\n      return\n    }\n\n    const io = new IntersectionObserver(\n      ([e]) => {\n        if (e.isIntersecting) {\n          setIsVisible(true)\n          io.disconnect()\n        }\n      },\n      { threshold: 0.1 }\n    )\n    if (ref.current) {\n      io.observe(ref.current)\n    }\n    return () => io.disconnect()\n  }, [enableInitialAnimation])\n\n  /* Lower z-index when open to stay behind the popup */\n  const zIndex = open ? 50 : 10 + index\n\n  return (\n    <span\n      ref={ref}\n      className={cn(\n        \"relative inline-block w-full transition-all duration-500 ease-out\",\n        className\n      )}\n      style={{\n        opacity: enableInitialAnimation ? (isVisible ? 1 : 0) : 1,\n        filter: enableInitialAnimation\n          ? isVisible\n            ? \"blur(0)\"\n            : \"blur(4px)\"\n          : \"blur(0)\",\n        zIndex,\n      }}\n    >\n      {/* @ts-ignore */}\n      <Cambio.Root\n        motion={motion}\n        dismissible={dismissible}\n        open={open}\n        onOpenChange={setOpen}\n      >\n        {/* @ts-ignore */}\n        <Cambio.Trigger\n          className={cn(\n            \"relative w-full overflow-hidden\",\n            !open && \"cursor-zoom-in\"\n          )}\n          style={{ pointerEvents: open ? \"none\" : \"auto\" }}\n        >\n          <img\n            src={src}\n            alt={alt}\n            width={width}\n            height={height}\n            loading={loading}\n            draggable={draggable}\n            className={cn(\"h-auto w-full\", className)}\n            style={{ pointerEvents: \"none\" }}\n          />\n        </Cambio.Trigger>\n\n        {/* @ts-ignore */}\n        <Cambio.Portal>\n          {/* @ts-ignore */}\n          <Cambio.Backdrop\n            motion=\"reduced\"\n            className=\"fixed inset-0 z-[100] bg-black/40\"\n          />\n          {/* @ts-ignore */}\n          <Cambio.Popup className=\"z-[101] w-full overflow-hidden md:w-[70%]\">\n            <img\n              src={src}\n              alt={alt}\n              width={width}\n              height={height}\n              loading=\"eager\"\n              draggable={draggable}\n              className={cn(\n                \"h-auto w-full object-contain\",\n                dismissOnImageClick && \"cursor-zoom-out\"\n              )}\n              style={{ pointerEvents: dismissOnImageClick ? \"auto\" : \"none\" }}\n              onClick={dismissOnImageClick ? () => setOpen(false) : undefined}\n            />\n          </Cambio.Popup>\n        </Cambio.Portal>\n      </Cambio.Root>\n    </span>\n  )\n}\n"
    },
    {
      "path": "delta/card-deck.tsx",
      "type": "registry:ui",
      "target": "",
      "content": "\"use client\"\n\nimport React from \"react\"\nimport { motion } from \"framer-motion\"\nimport { ChevronLeftIcon, ChevronRightIcon } from \"lucide-react\"\nimport { Autoplay, EffectCards, Navigation, Pagination } from \"swiper/modules\"\nimport { Swiper, SwiperSlide } from \"swiper/react\"\n\nimport \"swiper/css/effect-cards\"\nimport \"swiper/css/pagination\"\nimport \"swiper/css/navigation\"\nimport \"swiper/css\"\n\nimport { cn } from \"@/lib/utils\"\n\ninterface CardDeckContainerProps {\n  children: React.ReactNode\n  className?: string\n  showPagination?: boolean\n  showNavigation?: boolean\n  infinite?: boolean\n  autoplay?: boolean\n  spaceBetween?: number\n  enableInitialAnimation?: boolean\n}\n\ninterface CardDeckItemProps {\n  children: React.ReactNode\n  className?: string\n}\n\n// New modular API components\nexport function CardDeckContainer({\n  children,\n  className,\n  showPagination = false,\n  showNavigation = false,\n  infinite = true,\n  autoplay = false,\n  spaceBetween = 40,\n  enableInitialAnimation = true,\n}: CardDeckContainerProps) {\n  const css = `\n  .card-deck {\n    padding: 20px 0 50px 0 !important;\n  }\n  .card-deck .swiper-slide {\n    overflow: visible !important;\n  }\n  .card-deck .swiper-slide-shadow-cards {\n    border-radius: 1.5rem !important;\n  }\n  `\n\n  return (\n    <motion.div\n      initial={enableInitialAnimation ? { opacity: 0, translateY: 20 } : false}\n      animate={enableInitialAnimation ? { opacity: 1, translateY: 0 } : false}\n      transition={\n        enableInitialAnimation\n          ? {\n              duration: 0.3,\n              delay: 0.5,\n            }\n          : undefined\n      }\n      className={cn(\"relative w-full max-w-3xl overflow-visible\", className)}\n    >\n      <style>{css}</style>\n\n      <Swiper\n        spaceBetween={spaceBetween}\n        autoplay={\n          autoplay\n            ? {\n                delay: 1000,\n                disableOnInteraction: false,\n              }\n            : false\n        }\n        effect=\"cards\"\n        grabCursor={true}\n        loop={infinite}\n        allowTouchMove={true}\n        touchRatio={1}\n        resistance={true}\n        resistanceRatio={infinite ? 0 : 0.85}\n        pagination={\n          showPagination\n            ? {\n                clickable: true,\n              }\n            : false\n        }\n        navigation={\n          showNavigation\n            ? {\n                nextEl: \".swiper-button-next\",\n                prevEl: \".swiper-button-prev\",\n              }\n            : false\n        }\n        className=\"card-deck h-[360px] w-[240px] sm:h-[420px] sm:w-[280px]\"\n        modules={[EffectCards, Autoplay, Pagination, Navigation]}\n      >\n        {children &&\n          React.Children.map(children, (child, index) => {\n            if (React.isValidElement(child)) {\n              const slideClass = child.props.className || \"rounded-3xl\"\n\n              return (\n                <SwiperSlide\n                  key={index}\n                  className={cn(slideClass, \"overflow-hidden\")}\n                >\n                  {child.props.children}\n                </SwiperSlide>\n              )\n            }\n            return null\n          })}\n        {showNavigation && (\n          <div>\n            <div className=\"swiper-button-next after:hidden\">\n              <ChevronRightIcon className=\"h-6 w-6 text-white\" />\n            </div>\n            <div className=\"swiper-button-prev after:hidden\">\n              <ChevronLeftIcon className=\"h-6 w-6 text-white\" />\n            </div>\n          </div>\n        )}\n      </Swiper>\n    </motion.div>\n  )\n}\n\nexport function CardDeckItem({ children, className }: CardDeckItemProps) {\n  // This component passes its children and className to CardDeckContainer for rendering\n  return <>{children}</>\n}\n\n// Legacy API for backward compatibility\ninterface CardDeckProps {\n  images: { src: string; alt: string }[]\n  infinite?: boolean\n  autoplay?: boolean\n  showPagination?: boolean\n  showNavigation?: boolean\n  spaceBetween?: number\n  className?: string\n  enableInitialAnimation?: boolean\n}\n\nexport function CardDeck({\n  images,\n  infinite = true,\n  autoplay = false,\n  showPagination = false,\n  showNavigation = false,\n  spaceBetween = 40,\n  className,\n  enableInitialAnimation = true,\n}: CardDeckProps) {\n  return (\n    <CardDeckContainer\n      infinite={infinite}\n      autoplay={autoplay}\n      showPagination={showPagination}\n      showNavigation={showNavigation}\n      spaceBetween={spaceBetween}\n      className={className}\n      enableInitialAnimation={enableInitialAnimation}\n    >\n      {images &&\n        images.map((image, index) => (\n          <CardDeckItem key={index} className=\"rounded-3xl\">\n            <img\n              className=\"h-full w-full rounded-3xl object-cover\"\n              src={image.src}\n              alt={image.alt}\n            />\n          </CardDeckItem>\n        ))}\n    </CardDeckContainer>\n  )\n}\n"
    },
    {
      "path": "delta/admonition.tsx",
      "type": "registry:ui",
      "target": "",
      "content": "import React from \"react\"\nimport {\n  AlertCircle,\n  AlertTriangle,\n  CheckCircle,\n  Info,\n  Lightbulb,\n  XCircle,\n} from \"lucide-react\"\n\nconst admonitionConfig = {\n  note: {\n    bgColor: \"bg-blue-50 dark:bg-blue-950/30\",\n    borderColor: \"border-blue-200 dark:border-blue-800\",\n    textColor: \"text-blue-700 dark:text-blue-300\",\n    iconColor: \"text-blue-600 dark:text-blue-400\",\n    icon: Info,\n  },\n  tip: {\n    bgColor: \"bg-green-50 dark:bg-green-950/30\",\n    borderColor: \"border-green-200 dark:border-green-800\",\n    textColor: \"text-green-700 dark:text-green-300\",\n    iconColor: \"text-green-600 dark:text-green-400\",\n    icon: Lightbulb,\n  },\n  info: {\n    bgColor: \"bg-cyan-50 dark:bg-cyan-950/30\",\n    borderColor: \"border-cyan-200 dark:border-cyan-800\",\n    textColor: \"text-cyan-700 dark:text-cyan-300\",\n    iconColor: \"text-cyan-600 dark:text-cyan-400\",\n    icon: Info,\n  },\n  warning: {\n    bgColor: \"bg-amber-50 dark:bg-amber-950/30\",\n    borderColor: \"border-amber-200 dark:border-amber-700\",\n    textColor: \"text-amber-700 dark:text-amber-300\",\n    iconColor: \"text-amber-600 dark:text-amber-400\",\n    icon: AlertTriangle,\n  },\n  danger: {\n    bgColor: \"bg-red-50 dark:bg-red-950/30\",\n    borderColor: \"border-red-200 dark:border-red-800\",\n    textColor: \"text-red-700 dark:text-red-300\",\n    iconColor: \"text-red-600 dark:text-red-400\",\n    icon: XCircle,\n  },\n  success: {\n    bgColor: \"bg-emerald-50 dark:bg-emerald-950/30\",\n    borderColor: \"border-emerald-200 dark:border-emerald-800\",\n    textColor: \"text-emerald-700 dark:text-emerald-300\",\n    iconColor: \"text-emerald-600 dark:text-emerald-400\",\n    icon: CheckCircle,\n  },\n  caution: {\n    bgColor: \"bg-orange-50 dark:bg-orange-950/30\",\n    borderColor: \"border-orange-200 dark:border-orange-700\",\n    textColor: \"text-orange-700 dark:text-orange-300\",\n    iconColor: \"text-orange-600 dark:text-orange-400\",\n    icon: AlertCircle,\n  },\n}\n\ninterface AdmonitionProps {\n  type?: keyof typeof admonitionConfig\n  title?: string\n  children: React.ReactNode\n  icon?: React.ComponentType<{ className?: string }>\n  className?: string\n}\n\nexport function Admonition({\n  type = \"note\",\n  title,\n  children,\n  icon: CustomIcon,\n  className = \"\",\n}: AdmonitionProps) {\n  const config = admonitionConfig[type]\n  const IconComponent = CustomIcon || config.icon\n\n  return (\n    <div\n      className={` ${config.bgColor} ${config.borderColor} rounded-lg border p-4 ${className} `.trim()}\n    >\n      <div className=\"flex gap-3\">\n        <div className={`${config.iconColor} mt-0.5 flex-shrink-0`}>\n          <IconComponent className=\"h-5 w-5\" style={{ lineHeight: \"1lh\" }} />\n        </div>\n        <div className=\"min-w-0 flex-1\">\n          {title && (\n            <div className={`${config.textColor} mb-1 text-sm font-semibold`}>\n              {title}\n            </div>\n          )}\n          <div className={`${config.textColor} text-base leading-relaxed`}>\n            {children}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"
    },
    {
      "path": "delta/x-scrollable.tsx",
      "type": "registry:ui",
      "target": "",
      "content": "\"use client\"\n\nimport { useEffect, useRef, useState, type ReactNode } from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\ninterface XScrollableProps {\n  children: ReactNode\n  className?: string\n  showScrollbar?: boolean\n  scrollbarTrackClassName?: string\n  scrollbarThumbClassName?: string\n  onScroll?: (\n    scrollLeft: number,\n    scrollWidth: number,\n    clientWidth: number\n  ) => void\n}\n\nexport function XScrollable({\n  children,\n  className,\n  showScrollbar = false,\n  scrollbarTrackClassName,\n  scrollbarThumbClassName,\n  onScroll,\n}: XScrollableProps) {\n  const scrollContainerRef = useRef<HTMLDivElement>(null)\n  const [showLeftShadow, setShowLeftShadow] = useState(false)\n  const [showRightShadow, setShowRightShadow] = useState(false)\n\n  useEffect(() => {\n    const scrollContainer = scrollContainerRef.current\n    if (!scrollContainer) return\n\n    const handleScroll = () => {\n      const { scrollLeft, scrollWidth, clientWidth } = scrollContainer\n      setShowLeftShadow(scrollLeft > 0)\n      setShowRightShadow(scrollLeft < scrollWidth - clientWidth)\n      onScroll?.(scrollLeft, scrollWidth, clientWidth)\n    }\n\n    handleScroll() // Initial check\n    scrollContainer.addEventListener(\"scroll\", handleScroll)\n\n    return () => {\n      scrollContainer.removeEventListener(\"scroll\", handleScroll)\n    }\n  }, [onScroll])\n\n  return (\n    <div className=\"relative\">\n      <div\n        ref={scrollContainerRef}\n        className={cn(\n          \"overflow-x-auto overflow-y-hidden\",\n          showScrollbar\n            ? \"scrollbar-thin scrollbar-track-transparent scrollbar-thumb-gray-300 hover:scrollbar-thumb-gray-400\"\n            : \"scrollbar-hide\",\n          className\n        )}\n      >\n        {children}\n      </div>\n      {showLeftShadow && (\n        <div className=\"from-background pointer-events-none absolute top-0 bottom-0 left-0 w-8 bg-gradient-to-r to-transparent\" />\n      )}\n      {showRightShadow && (\n        <div className=\"from-background pointer-events-none absolute top-0 right-0 bottom-0 w-8 bg-gradient-to-l to-transparent\" />\n      )}\n      {showScrollbar && (\n        <div\n          className={cn(\n            \"mt-1 h-1 rounded-full bg-gray-200\",\n            scrollbarTrackClassName\n          )}\n        >\n          <div\n            className={cn(\n              \"h-full rounded-full bg-gray-400\",\n              scrollbarThumbClassName\n            )}\n            style={{\n              width: scrollContainerRef.current\n                ? `${(scrollContainerRef.current.clientWidth / scrollContainerRef.current.scrollWidth) * 100}%`\n                : \"0%\",\n              transform: scrollContainerRef.current\n                ? `translateX(${(scrollContainerRef.current.scrollLeft / scrollContainerRef.current.clientWidth) * 100}%)`\n                : \"translateX(0%)\",\n            }}\n          />\n        </div>\n      )}\n    </div>\n  )\n}\n"
    },
    {
      "path": "delta/tabs.tsx",
      "type": "registry:ui",
      "target": "",
      "content": "\"use client\"\n\nimport React, {\n  forwardRef,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n  type ReactNode,\n} from \"react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { XScrollable } from \"@/registry/delta-ui/delta/x-scrollable\"\n\n// Base Tabs component (Root)\nconst Tabs = forwardRef<\n  HTMLDivElement,\n  {\n    defaultValue?: string\n    value?: string\n    onValueChange?: (value: string) => void\n    className?: string\n    children?: ReactNode\n  }\n>(\n  (\n    { defaultValue, value, onValueChange, className, children, ...props },\n    ref\n  ) => {\n    const [activeValue, setActiveValue] = useState(value || defaultValue || \"\")\n\n    useEffect(() => {\n      if (value !== undefined) {\n        setActiveValue(value)\n      }\n    }, [value])\n\n    const handleValueChange = useCallback(\n      (newValue: string) => {\n        if (value === undefined) {\n          setActiveValue(newValue)\n        }\n        onValueChange?.(newValue)\n      },\n      [onValueChange, value]\n    )\n\n    return (\n      <div ref={ref} className={cn(\"tabs-container\", className)} {...props}>\n        {React.Children.map(children, (child) => {\n          if (!React.isValidElement(child)) return child\n\n          // Only pass tab-related props to tab components\n          const childType = child.type\n          const isTabComponent =\n            childType === TabsList ||\n            childType === TabsTrigger ||\n            childType === TabsContent ||\n            (typeof childType === \"function\" &&\n              ((childType as any).displayName === \"TabsList\" ||\n                (childType as any).displayName === \"TabsTrigger\" ||\n                (childType as any).displayName === \"TabsContent\"))\n\n          if (isTabComponent) {\n            return React.cloneElement(\n              child as React.ReactElement<{\n                activeValue?: string\n                onValueChange?: (value: string) => void\n                className?: string\n                children?: ReactNode\n                [key: string]: any\n              }>,\n              {\n                activeValue,\n                onValueChange: handleValueChange,\n              }\n            )\n          }\n\n          return child\n        })}\n      </div>\n    )\n  }\n)\nTabs.displayName = \"Tabs\"\n\n// TabsList component\nconst TabsList = forwardRef<\n  HTMLDivElement,\n  {\n    className?: string\n    activeValue?: string\n    onValueChange?: (value: string) => void\n    children?: ReactNode\n    showHoverEffect?: boolean\n    showActiveIndicator?: boolean\n    activeIndicatorPosition?: \"top\" | \"bottom\"\n    activeIndicatorOffset?: number\n    size?: \"sm\" | \"md\" | \"lg\"\n    variant?: \"default\" | \"pills\" | \"underlined\"\n    stretch?: boolean\n    ariaLabel?: string\n    showBottomBorder?: boolean\n    bottomBorderClassName?: string\n    activeIndicatorClassName?: string\n    hoverIndicatorClassName?: string\n  }\n>(\n  (\n    {\n      className,\n      activeValue,\n      onValueChange,\n      children,\n      showHoverEffect = true,\n      showActiveIndicator = true,\n      activeIndicatorPosition = \"bottom\",\n      activeIndicatorOffset = 0,\n      size = \"sm\",\n      variant = \"default\",\n      stretch = false,\n      ariaLabel = \"Tabs\",\n      showBottomBorder = false,\n      bottomBorderClassName,\n      activeIndicatorClassName,\n      hoverIndicatorClassName,\n      ...props\n    },\n    ref\n  ) => {\n    const [hoveredIndex, setHoveredIndex] = useState<number | null>(null)\n    const [hoverStyle, setHoverStyle] = useState({})\n    const [activeStyle, setActiveStyle] = useState({\n      left: \"0px\",\n      width: \"0px\",\n    })\n    const tabRefs = useRef<(HTMLDivElement | null)[]>([])\n    const scrollContainerRef = useRef<HTMLDivElement | null>(null)\n\n    // Find active tab index based on value\n    const activeIndex = React.Children.toArray(children).findIndex(\n      (child) =>\n        React.isValidElement(child) &&\n        (child as React.ReactElement<{ value: string }>).props.value ===\n          activeValue\n    )\n\n    // Update hover indicator position\n    useEffect(() => {\n      if (hoveredIndex !== null && showHoverEffect) {\n        const hoveredElement = tabRefs.current[hoveredIndex]\n        if (hoveredElement) {\n          const { offsetLeft, offsetWidth } = hoveredElement\n          setHoverStyle({\n            left: `${offsetLeft}px`,\n            width: `${offsetWidth}px`,\n          })\n        }\n      }\n    }, [hoveredIndex, showHoverEffect])\n\n    // Update active indicator position\n    const updateActiveIndicator = useCallback(() => {\n      if (showActiveIndicator && activeIndex >= 0) {\n        const activeElement = tabRefs.current[activeIndex]\n        if (activeElement) {\n          const { offsetLeft, offsetWidth } = activeElement\n          setActiveStyle({\n            left: `${offsetLeft}px`,\n            width: `${offsetWidth}px`,\n          })\n        }\n      }\n    }, [activeIndex, showActiveIndicator])\n\n    // Update active indicator on active tab change\n    useEffect(() => {\n      updateActiveIndicator()\n    }, [activeIndex, updateActiveIndicator])\n\n    // Initialize active indicator position\n    useEffect(() => {\n      requestAnimationFrame(updateActiveIndicator)\n    }, [updateActiveIndicator])\n\n    // Function to scroll tab to center\n    const scrollTabToCenter = (index: number) => {\n      const tabElement = tabRefs.current[index]\n      const scrollContainer = scrollContainerRef.current\n\n      if (tabElement && scrollContainer) {\n        const containerWidth = scrollContainer.offsetWidth\n        const tabWidth = tabElement.offsetWidth\n        const tabLeft = tabElement.offsetLeft\n\n        // Calculate position to center the tab\n        const scrollTarget = tabLeft - containerWidth / 2 + tabWidth / 2\n\n        // Smooth scroll to the target position\n        scrollContainer.scrollTo({\n          left: scrollTarget,\n          behavior: \"smooth\",\n        })\n      }\n    }\n\n    // Size classes\n    const sizeClasses = {\n      sm: \"h-[32px] text-sm\",\n      md: \"h-[40px] text-base\",\n      lg: \"h-[48px] text-lg\",\n    }\n\n    // Variant classes\n    const variantClasses = {\n      default: \"\",\n      pills: \"rounded-full\",\n      underlined: \"\",\n    }\n\n    // Active indicator classes\n    const activeIndicatorClasses = {\n      default: \"h-[4px] bg-primary dark:bg-primary\",\n      pills: \"hidden\",\n      underlined: \"h-[4px] bg-primary dark:bg-primary\",\n    }\n\n    // Hover indicator classes\n    const hoverIndicatorClasses = {\n      default: \"bg-muted dark:bg-muted rounded-[6px]\",\n      pills: \"bg-muted dark:bg-muted rounded-full\",\n      underlined: \"bg-muted dark:bg-muted rounded-[6px]\",\n    }\n\n    // Create a proper ref callback function\n    const setTabRef = useCallback(\n      (el: HTMLDivElement | null, index: number) => {\n        tabRefs.current[index] = el\n      },\n      []\n    )\n\n    // Save a reference to the scroll container when it's mounted\n    const handleScrollableRef = useCallback((node: HTMLDivElement | null) => {\n      if (node) {\n        // Find the actual scrollable div inside XScrollable\n        const scrollableDiv = node.querySelector(\n          'div[class*=\"overflow-x-auto\"]'\n        )\n        if (scrollableDiv) {\n          scrollContainerRef.current = scrollableDiv as HTMLDivElement\n        }\n      }\n    }, [])\n\n    // Center the active tab on initial render only\n    useEffect(() => {\n      if (activeIndex >= 0) {\n        // Use a small timeout to ensure the tabs are properly rendered\n        const timer = setTimeout(() => {\n          scrollTabToCenter(activeIndex)\n        }, 100)\n\n        return () => clearTimeout(timer)\n      }\n    }, []) // Empty dependency array means this only runs once on mount\n\n    return (\n      <div\n        ref={handleScrollableRef}\n        className={cn(\"relative\", className)}\n        role=\"tablist\"\n        aria-label={ariaLabel}\n        {...props}\n      >\n        <XScrollable showScrollbar={false}>\n          <div className={cn(\"relative\", showBottomBorder && \"pb-px\")}>\n            {/* Bottom border for the entire tab list */}\n            {showBottomBorder && (\n              <div\n                className={cn(\n                  \"bg-border dark:bg-border absolute right-0 bottom-0 left-0 h-px\",\n                  bottomBorderClassName\n                )}\n              />\n            )}\n\n            {/* Hover Indicator */}\n            {showHoverEffect && (\n              <div\n                className={cn(\n                  \"absolute z-0 flex items-center transition-all duration-300 ease-out\",\n                  sizeClasses[size],\n                  hoverIndicatorClasses[variant],\n                  hoverIndicatorClassName\n                )}\n                style={{\n                  ...hoverStyle,\n                  opacity: hoveredIndex !== null ? 1 : 0,\n                  transition: \"all 300ms ease-out\",\n                }}\n                aria-hidden=\"true\"\n              />\n            )}\n\n            {/* Tabs */}\n            <div\n              ref={ref}\n              className={cn(\n                \"relative flex items-center\",\n                stretch ? \"w-full\" : \"\",\n                variant === \"default\" ? \"space-x-[6px]\" : \"space-x-[2px]\"\n              )}\n            >\n              {React.Children.map(children, (child, index) => {\n                if (!React.isValidElement(child)) return child\n\n                const props = (\n                  child as React.ReactElement<{\n                    value: string\n                    disabled?: boolean\n                    label?: string\n                    className?: string\n                    activeClassName?: string\n                    inactiveClassName?: string\n                    disabledClassName?: string\n                  }>\n                ).props\n\n                const { value, disabled } = props\n                const isActive = value === activeValue\n\n                return (\n                  <div\n                    key={value}\n                    ref={(el) => setTabRef(el, index)}\n                    className={cn(\n                      \"mb-2 cursor-pointer px-3 py-2 transition-colors duration-300 sm:mb-1.5\",\n                      sizeClasses[size],\n                      variant === \"pills\" && isActive\n                        ? \"rounded-full bg-[#0e0f1114] dark:bg-[#ffffff1a]\"\n                        : \"\",\n                      disabled ? \"cursor-not-allowed opacity-50\" : \"\",\n                      stretch ? \"flex-1 text-center\" : \"\",\n                      isActive\n                        ? props.activeClassName ||\n                            \"text-foreground dark:text-foreground\"\n                        : props.inactiveClassName ||\n                            \"text-muted-foreground dark:text-muted-foreground\",\n                      disabled && props.disabledClassName,\n                      variantClasses[variant],\n                      props.className\n                    )}\n                    onMouseEnter={() => !disabled && setHoveredIndex(index)}\n                    onMouseLeave={() => setHoveredIndex(null)}\n                    onClick={() => {\n                      if (!disabled) {\n                        onValueChange?.(value)\n                        scrollTabToCenter(index)\n                      }\n                    }}\n                    role=\"tab\"\n                    aria-selected={isActive}\n                    aria-disabled={disabled}\n                    aria-controls={`tabpanel-${value}`}\n                    id={`tab-${value}`}\n                    tabIndex={isActive ? 0 : -1}\n                  >\n                    <div className=\"flex h-full items-center justify-center whitespace-nowrap\">\n                      {child}\n                    </div>\n                  </div>\n                )\n              })}\n            </div>\n\n            {/* Active Indicator */}\n            {showActiveIndicator && variant !== \"pills\" && activeIndex >= 0 && (\n              <div\n                className={cn(\n                  \"absolute z-10 transition-all duration-300 ease-out\",\n                  activeIndicatorClasses[variant],\n                  activeIndicatorPosition === \"top\"\n                    ? \"top-[-1px]\"\n                    : \"bottom-[-1px]\",\n                  activeIndicatorClassName\n                )}\n                style={{\n                  ...activeStyle,\n                  transition: \"all 300ms ease-out z-50\",\n                  [activeIndicatorPosition]: `${activeIndicatorOffset}px`,\n                }}\n                aria-hidden=\"true\"\n              />\n            )}\n          </div>\n        </XScrollable>\n      </div>\n    )\n  }\n)\nTabsList.displayName = \"TabsList\"\n\n// TabsTrigger component\nconst TabsTrigger = forwardRef<\n  HTMLDivElement,\n  {\n    value: string\n    disabled?: boolean\n    label?: string\n    className?: string\n    activeClassName?: string\n    inactiveClassName?: string\n    disabledClassName?: string\n    activeValue?: string\n    onValueChange?: (value: string) => void\n    children?: ReactNode\n  }\n>(\n  (\n    {\n      value,\n      disabled = false,\n      label,\n      className,\n      activeClassName,\n      inactiveClassName,\n      disabledClassName,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    return (\n      <div ref={ref} className={className} {...props}>\n        {label || children}\n      </div>\n    )\n  }\n)\n\nTabsTrigger.displayName = \"TabsTrigger\"\n\n// TabsContent component\nconst TabsContent = forwardRef<\n  HTMLDivElement,\n  {\n    value: string\n    className?: string\n    activeValue?: string\n    onValueChange?: (value: string) => void\n    children: ReactNode\n  }\n>(\n  (\n    {\n      value,\n      className,\n      activeValue,\n      onValueChange, // Destructure this prop to prevent it from being passed to the div\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    if (value !== activeValue) return null\n\n    return (\n      <div\n        ref={ref}\n        role=\"tabpanel\"\n        id={`tabpanel-${value}`}\n        aria-labelledby={`tab-${value}`}\n        className={className}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n)\nTabsContent.displayName = \"TabsContent\"\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"
    },
    {
      "path": "delta/qrcode.tsx",
      "type": "registry:ui",
      "target": "",
      "content": "\"use client\"\n\nimport React, { useEffect, useRef } from \"react\"\nimport QRCodeStyling from \"qr-code-styling\"\n\nimport { cn } from \"@/lib/utils\"\n\ninterface QRCodeProps {\n  value: string\n  size?: number\n  bgColor?: string // Can be a CSS variable (e.g. --color-background) or a color value\n  fgColor?: string // Can be a CSS variable (e.g. --color-foreground) or a color value\n  level?: \"L\" | \"M\" | \"Q\" | \"H\"\n  marginSize?: number\n  className?: string\n  enableNavigation?: boolean // Enable click navigation to the QR code URL\n  dotStyle?:\n    | \"rounded\"\n    | \"dots\"\n    | \"classy\"\n    | \"classy-rounded\"\n    | \"square\"\n    | \"extra-rounded\"\n  cornerSquareStyle?:\n    | \"dot\"\n    | \"square\"\n    | \"extra-rounded\"\n    | \"rounded\"\n    | \"dots\"\n    | \"classy\"\n    | \"classy-rounded\"\n  cornerDotStyle?:\n    | \"dot\"\n    | \"square\"\n    | \"rounded\"\n    | \"dots\"\n    | \"classy\"\n    | \"classy-rounded\"\n    | \"extra-rounded\"\n  logoImage?: string // URL or data URI for the logo image\n  logoSize?: number // Size of the logo as a percentage of the QR code size (0-1)\n  logoMargin?: number // Margin around the logo in pixels\n}\n\n// Helper to resolve CSS variable or direct color\nfunction resolveColor(color?: string, fallback?: string) {\n  if (!color) return fallback\n  if (color.startsWith(\"--\")) {\n    if (typeof window !== \"undefined\") {\n      const value = getComputedStyle(document.documentElement).getPropertyValue(\n        color\n      )\n      if (value) return value.trim()\n    }\n    return fallback\n  }\n  return color\n}\n\nexport default function QRCode({\n  value,\n  size = 200,\n  // Use shadcn theme variables for best contrast by default\n  bgColor = \"--color-background\", // background\n  fgColor = \"--color-foreground\", // foreground (text/qr dots)\n  level = \"M\",\n  marginSize = 0,\n  className,\n  enableNavigation = false,\n  dotStyle = \"square\",\n  cornerSquareStyle = \"square\",\n  cornerDotStyle = \"square\",\n  logoImage,\n  logoSize = 0.2,\n  logoMargin = 0,\n}: QRCodeProps) {\n  const ref = useRef<HTMLDivElement>(null)\n  const qrCodeRef = useRef<QRCodeStyling | null>(null)\n\n  useEffect(() => {\n    if (!value || !ref.current) return\n\n    // Always resolve to actual color values\n    const resolvedBgColor = resolveColor(bgColor, \"hsl(0, 0%, 100%)\") // fallback: white\n    const resolvedFgColor = resolveColor(fgColor, \"hsl(222.2, 84%, 4.9%)\") // fallback: dark\n\n    const qrCode = new QRCodeStyling({\n      width: size,\n      height: size,\n      type: \"svg\",\n      data: value,\n      margin: marginSize,\n      image: logoImage,\n      qrOptions: {\n        typeNumber: 0,\n        mode: \"Byte\",\n        errorCorrectionLevel: level,\n      },\n      imageOptions: {\n        hideBackgroundDots: true,\n        imageSize: logoSize,\n        margin: logoMargin,\n        crossOrigin: \"anonymous\",\n      },\n      dotsOptions: {\n        color: resolvedFgColor,\n        type: dotStyle,\n      },\n      backgroundOptions: {\n        color: resolvedBgColor,\n      },\n      cornersSquareOptions: {\n        color: resolvedFgColor,\n        type: cornerSquareStyle,\n      },\n      cornersDotOptions: {\n        color: resolvedFgColor,\n        type: cornerDotStyle,\n      },\n    })\n\n    qrCodeRef.current = qrCode\n\n    // Clear previous content\n    ref.current.innerHTML = \"\"\n\n    // Append the QR code\n    qrCode.append(ref.current)\n  }, [\n    value,\n    size,\n    bgColor,\n    fgColor,\n    level,\n    marginSize,\n    dotStyle,\n    cornerSquareStyle,\n    cornerDotStyle,\n    logoImage,\n    logoSize,\n    logoMargin,\n  ])\n\n  // Re-render when theme changes by listening to color changes\n  useEffect(() => {\n    if (!qrCodeRef.current) return\n\n    const handleThemeChange = () => {\n      // Force re-render by updating the effect dependencies\n      const resolvedBgColor = resolveColor(bgColor, \"hsl(0, 0%, 100%)\")\n      const resolvedFgColor = resolveColor(fgColor, \"hsl(222.2, 84%, 4.9%)\")\n\n      qrCodeRef.current?.update({\n        dotsOptions: {\n          color: resolvedFgColor,\n          type: dotStyle,\n        },\n        backgroundOptions: {\n          color: resolvedBgColor,\n        },\n        cornersSquareOptions: {\n          color: resolvedFgColor,\n          type: cornerSquareStyle,\n        },\n        cornersDotOptions: {\n          color: resolvedFgColor,\n          type: cornerDotStyle,\n        },\n      })\n    }\n\n    // Listen for theme changes\n    const mediaQuery = window.matchMedia(\"(prefers-color-scheme: dark)\")\n    mediaQuery.addEventListener(\"change\", handleThemeChange)\n\n    // Also listen for class changes on document element (for manual theme switching)\n    const observer = new MutationObserver(handleThemeChange)\n    observer.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: [\"class\", \"data-theme\"],\n    })\n\n    return () => {\n      mediaQuery.removeEventListener(\"change\", handleThemeChange)\n      observer.disconnect()\n    }\n  }, [bgColor, fgColor, dotStyle, cornerSquareStyle, cornerDotStyle])\n\n  if (!value) {\n    return (\n      <div\n        className={cn(\n          \"flex items-center justify-center rounded-xl border-2 border-dashed border-gray-300 text-gray-500\",\n          className\n        )}\n        style={{ width: size, height: size }}\n      >\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 368 368\"\n          className=\"animate-pulse rounded-lg opacity-30\"\n          style={{\n            width: `${size - marginSize * 8}px`,\n            height: `${size - marginSize * 8}px`,\n          }}\n        >\n          <path\n            d=\"m 16,16 0,16 0,16 0,16 0,16 0,16 0,16 0,16 16,0 16,0 16,0 16,0 16,0 16,0 16,0 0,-16 0,-16 0,-16 0,-16 0,-16 0,-16 0,-16 -16,0 -16,0 -16,0 -16,0 -16,0 -16,0 -16,0 z m 128,0 0,16 0,16 16,0 0,-16 16,0 0,-16 -16,0 -16,0 z m 32,16 0,16 16,0 0,-16 -16,0 z m 16,16 0,16 16,0 16,0 0,-16 0,-16 0,-16 -16,0 0,16 0,16 -16,0 z m 0,16 -16,0 -16,0 -16,0 0,16 16,0 16,0 0,16 -16,0 0,16 16,0 0,16 16,0 0,-16 16,0 0,16 -16,0 0,16 -16,0 0,16 16,0 16,0 0,16 16,0 0,-16 0,-16 0,-16 0,-16 0,-16 -16,0 0,-16 -16,0 0,-16 z m 16,112 -16,0 0,16 -16,0 0,16 0,16 16,0 0,16 0,16 -16,0 -16,0 0,-16 16,0 0,-16 -16,0 0,-16 0,-16 -16,0 0,-16 16,0 0,16 16,0 0,-16 0,-16 -16,0 -16,0 0,-16 -16,0 -16,0 -16,0 0,16 -16,0 0,16 -16,0 0,-16 16,0 0,-16 -16,0 -16,0 0,16 -16,0 0,16 0,16 0,16 16,0 0,-16 16,0 16,0 16,0 0,-16 16,0 0,-16 16,0 0,16 -16,0 0,16 16,0 0,16 -16,0 0,16 16,0 16,0 0,16 0,16 0,16 16,0 0,16 16,0 16,0 16,0 0,16 -16,0 -16,0 -16,0 0,-16 -16,0 0,16 0,16 16,0 0,16 -16,0 0,16 16,0 16,0 0,-16 16,0 0,16 16,0 16,0 16,0 16,0 0,-16 16,0 0,16 16,0 16,0 16,0 0,-16 -16,0 -16,0 0,-16 -16,0 0,-16 -16,0 0,16 -16,0 -16,0 0,16 -16,0 0,-16 16,0 0,-16 0,-16 0,-16 16,0 0,-16 -16,0 -16,0 0,-16 16,0 0,-16 0,-16 0,-16 -16,0 0,-16 z m 48,128 0,-16 -16,0 0,16 16,0 z m 32,16 16,0 16,0 0,-16 -16,0 -16,0 0,16 z m 32,-16 16,0 0,-16 0,-16 0,-16 0,-16 -16,0 -16,0 -16,0 0,-16 -16,0 0,16 -16,0 0,16 0,16 16,0 0,-16 16,0 0,16 0,16 16,0 16,0 0,16 z m -48,-80 0,-16 -16,0 -16,0 0,16 16,0 16,0 z m 16,0 16,0 0,-16 0,-16 0,-16 16,0 0,16 16,0 0,16 16,0 0,-16 0,-16 -16,0 0,-16 16,0 0,-16 -16,0 -16,0 0,16 -16,0 0,-16 -16,0 0,16 -16,0 0,16 16,0 0,16 0,16 0,16 z m -16,-48 -16,0 0,16 16,0 0,-16 z m 64,32 -16,0 0,16 16,0 0,-16 z m -224,0 0,-16 -16,0 0,16 16,0 z m -16,0 -16,0 -16,0 -16,0 0,16 16,0 16,0 16,0 0,-16 z m -64,0 -16,0 0,16 16,0 0,-16 z m 0,-48 0,-16 -16,0 0,16 16,0 z m 112,-16 16,0 0,-16 0,-16 -16,0 0,16 0,16 z m 96,-128 0,16 0,16 0,16 0,16 0,16 0,16 0,16 16,0 16,0 16,0 16,0 16,0 16,0 16,0 0,-16 0,-16 0,-16 0,-16 0,-16 0,-16 0,-16 -16,0 -16,0 -16,0 -16,0 -16,0 -16,0 -16,0 z m -208,16 16,0 16,0 16,0 16,0 16,0 0,16 0,16 0,16 0,16 0,16 -16,0 -16,0 -16,0 -16,0 -16,0 0,-16 0,-16 0,-16 0,-16 0,-16 z m 224,0 16,0 16,0 16,0 16,0 16,0 0,16 0,16 0,16 0,16 0,16 -16,0 -16,0 -16,0 -16,0 -16,0 0,-16 0,-16 0,-16 0,-16 0,-16 z m -208,16 0,16 0,16 0,16 16,0 16,0 16,0 0,-16 0,-16 0,-16 -16,0 -16,0 -16,0 z m 224,0 0,16 0,16 0,16 16,0 16,0 16,0 0,-16 0,-16 0,-16 -16,0 -16,0 -16,0 z m -32,96 0,16 16,0 0,-16 -16,0 z m -224,96 0,16 0,16 0,16 0,16 0,16 0,16 0,16 16,0 16,0 16,0 16,0 16,0 16,0 16,0 0,-16 0,-16 0,-16 0,-16 0,-16 0,-16 0,-16 -16,0 -16,0 -16,0 -16,0 -16,0 -16,0 -16,0 z m 16,16 16,0 16,0 16,0 16,0 16,0 0,16 0,16 0,16 0,16 0,16 -16,0 -16,0 -16,0 -16,0 -16,0 0,-16 0,-16 0,-16 0,-16 0,-16 z m 16,16 0,16 0,16 0,16 16,0 16,0 16,0 0,-16 0,-16 0,-16 -16,0 -16,0 -16,0 z m 288,48 0,16 16,0 0,-16 -16,0 z\"\n            fill=\"currentColor\"\n            className=\"text-gray-400 dark:text-gray-600\"\n          />\n        </svg>\n      </div>\n    )\n  }\n\n  const handleClick = () => {\n    if (enableNavigation && value) {\n      // Check if the value is a valid URL\n      try {\n        const url = new URL(value)\n        window.open(url.toString(), \"_blank\", \"noopener,noreferrer\")\n      } catch {\n        // If not a valid URL, try to open it anyway (might be a relative path)\n        window.open(value, \"_blank\", \"noopener,noreferrer\")\n      }\n    }\n  }\n\n  return (\n    <div\n      className={cn(\n        \"inline-block\",\n        enableNavigation &&\n          \"cursor-pointer transition-opacity hover:opacity-80\",\n        className\n      )}\n      onClick={handleClick}\n      role={enableNavigation ? \"button\" : undefined}\n      tabIndex={enableNavigation ? 0 : undefined}\n      onKeyDown={\n        enableNavigation\n          ? (e) => {\n              if (e.key === \"Enter\" || e.key === \" \") {\n                e.preventDefault()\n                handleClick()\n              }\n            }\n          : undefined\n      }\n    >\n      <div ref={ref} />\n    </div>\n  )\n}\n"
    },
    {
      "path": "delta/chat.tsx",
      "type": "registry:ui",
      "target": "",
      "content": "\"use client\"\n\nimport React, {\n  memo,\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n  type ComponentProps,\n} from \"react\"\nimport {\n  ArrowUp,\n  ArrowDown,\n  Bot,\n  ChevronDown,\n  FileText,\n  Paperclip,\n  User,\n  X,\n} from \"lucide-react\"\nimport { motion, useInView, UseInViewOptions } from \"motion/react\"\nimport { Streamdown } from \"streamdown\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/registry/shadcn/avatar\"\nimport { Button } from \"@/registry/shadcn/button\"\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/registry/shadcn/dropdown-menu\"\nimport { Textarea } from \"@/registry/shadcn/textarea\"\n\n// Response Component\ntype ResponseProps = ComponentProps<typeof Streamdown>\n\nexport const ChatResponse = memo(\n  ({ className, children, ...props }: ResponseProps) => (\n    <Streamdown\n      className={cn(\n        \"size-full [&>*:first-child]:mt-0 [&>*:last-child]:mb-0\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </Streamdown>\n  ),\n  (prevProps, nextProps) => prevProps.children === nextProps.children\n)\n\nChatResponse.displayName = \"ChatResponse\"\n\n// Streaming Response Component\ninterface StreamingResponseProps {\n  content: string\n  streamDelay?: number\n  className?: string\n}\n\nexport function ChatStreamingResponse({\n  content,\n  streamDelay = 20,\n  className,\n}: StreamingResponseProps) {\n  const [displayedContent, setDisplayedContent] = useState(\"\")\n  const [isComplete, setIsComplete] = useState(false)\n  const [isMounted, setIsMounted] = useState(false)\n\n  React.useEffect(() => {\n    setIsMounted(true)\n  }, [])\n\n  React.useEffect(() => {\n    if (!isMounted) return\n\n    setDisplayedContent(\"\")\n    setIsComplete(false)\n\n    let currentIndex = 0\n    const interval = setInterval(() => {\n      if (currentIndex < content.length) {\n        setDisplayedContent(content.slice(0, currentIndex + 1))\n        currentIndex++\n      } else {\n        setIsComplete(true)\n        clearInterval(interval)\n      }\n    }, streamDelay)\n\n    return () => clearInterval(interval)\n  }, [content, streamDelay, isMounted])\n\n  if (!isMounted) {\n    return <ChatResponse className={className}>{content}</ChatResponse>\n  }\n\n  return (\n    <div\n      className={cn(\n        \"size-full [&>*:first-child]:mt-0 [&>*:last-child]:mb-0\",\n        className\n      )}\n    >\n      <Streamdown>{displayedContent}</Streamdown>\n      {!isComplete && <span className=\"animate-pulse\">â–Š</span>}\n    </div>\n  )\n}\n\n// Shimmering Text Component for Reasoning\ninterface ShimmeringTextProps {\n  text: string\n  duration?: number\n  delay?: number\n  repeat?: boolean\n  repeatDelay?: number\n  className?: string\n  startOnView?: boolean\n  once?: boolean\n  inViewMargin?: UseInViewOptions[\"margin\"]\n  spread?: number\n  color?: string\n  shimmerColor?: string\n}\n\nexport function ChatReasoning({\n  text,\n  duration = 2,\n  delay = 0,\n  repeat = true,\n  repeatDelay = 0.5,\n  className,\n  startOnView = true,\n  once = false,\n  inViewMargin,\n  spread = 2,\n  color,\n  shimmerColor,\n}: ShimmeringTextProps) {\n  const ref = useRef<HTMLSpanElement>(null)\n  const [isMounted, setIsMounted] = useState(false)\n  const isInView = useInView(ref, { once, margin: inViewMargin })\n\n  React.useEffect(() => {\n    setIsMounted(true)\n  }, [])\n\n  const dynamicSpread = useMemo(() => {\n    return text.length * spread\n  }, [text, spread])\n\n  const shouldAnimate = isMounted && (!startOnView || isInView)\n\n  if (!isMounted) {\n    return (\n      <span\n        ref={ref}\n        className={cn(\"text-muted-foreground relative inline-block\", className)}\n      >\n        {text}\n      </span>\n    )\n  }\n\n  return (\n    <motion.span\n      ref={ref}\n      className={cn(\n        \"relative inline-block bg-[length:250%_100%,auto] bg-clip-text text-transparent\",\n        \"[--base-color:var(--muted-foreground)] [--shimmer-color:var(--foreground)]\",\n        \"[background-repeat:no-repeat,padding-box]\",\n        \"[--shimmer-bg:linear-gradient(90deg,transparent_calc(50%-var(--spread)),var(--shimmer-color),transparent_calc(50%+var(--spread)))]\",\n        \"dark:[--base-color:var(--muted-foreground)] dark:[--shimmer-color:var(--foreground)]\",\n        className\n      )}\n      style={\n        {\n          \"--spread\": `${dynamicSpread}px`,\n          ...(color && { \"--base-color\": color }),\n          ...(shimmerColor && { \"--shimmer-color\": shimmerColor }),\n          backgroundImage: `var(--shimmer-bg), linear-gradient(var(--base-color), var(--base-color))`,\n        } as React.CSSProperties\n      }\n      initial={{\n        backgroundPosition: \"100% center\",\n        opacity: 0,\n      }}\n      animate={\n        shouldAnimate\n          ? {\n              backgroundPosition: \"0% center\",\n              opacity: 1,\n            }\n          : {}\n      }\n      transition={{\n        backgroundPosition: {\n          repeat: repeat ? Infinity : 0,\n          duration,\n          delay,\n          repeatDelay,\n          ease: \"linear\",\n        },\n        opacity: {\n          duration: 0.3,\n          delay,\n        },\n      }}\n    >\n      {text}\n    </motion.span>\n  )\n}\n\n// Model Interface\ninterface Model {\n  id: string\n  name: string\n  model: string\n}\n\n// Data attributes for targeting components with CSS\n// Use these data attributes to style components:\n// [data-chat=\"send-button\"] - Send button\n// [data-chat=\"model-selector\"] - Model selector dropdown\n// [data-chat=\"options\"] - Options container\n// [data-chat=\"prompt-input\"] - Prompt input container\n// [data-chat=\"textarea\"] - Textarea element\n\n// ChatSendButton Component\ninterface ChatSendButtonProps {\n  isDisabled: boolean\n  isLoading: boolean\n  className?: string\n}\n\nexport function ChatSendButton({\n  isDisabled,\n  isLoading,\n  className,\n}: ChatSendButtonProps) {\n  return (\n    <Button\n      type=\"submit\"\n      disabled={isDisabled}\n      size=\"icon\"\n      data-chat=\"send-button\"\n      className={cn(\n        \"bg-primary hover:bg-primary/90 h-8 w-8 rounded-full\",\n        isDisabled && \"cursor-not-allowed\",\n        className\n      )}\n    >\n      <ArrowUp className=\"h-4 w-4\" />\n    </Button>\n  )\n}\n\n// ChatModelSelector Component\ninterface ChatModelSelectorProps {\n  selectedModel: string\n  onModelChange: (modelId: string) => void\n  models: Model[]\n  className?: string\n}\n\nexport function ChatModelSelector({\n  selectedModel,\n  onModelChange,\n  models,\n  className,\n}: ChatModelSelectorProps) {\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <button\n          className={cn(\n            \"focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 hover:text-accent-foreground text-muted-foreground/60 hover:bg-muted flex h-6 shrink-0 items-center justify-center gap-1 rounded-md bg-transparent px-2 text-sm font-medium whitespace-nowrap transition-all outline-none focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 has-[>svg]:px-1.5 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n            className\n          )}\n          data-chat=\"model-selector\"\n          data-slot=\"popover-trigger\"\n          type=\"button\"\n          aria-haspopup=\"dialog\"\n        >\n          <span>\n            {models.find((model) => model.id === selectedModel)?.name ||\n              \"Select Model\"}\n          </span>\n          <ChevronDown className=\"text-muted-foreground h-3 w-3 opacity-60\" />\n        </button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"start\">\n        {models.map((model) => (\n          <DropdownMenuItem\n            key={model.id}\n            onClick={() => onModelChange(model.id)}\n            className=\"cursor-pointer\"\n          >\n            <div className=\"flex flex-col items-start\">\n              <span>{model.name}</span>\n              <span className=\"text-muted-foreground text-xs\">\n                {model.model}\n              </span>\n            </div>\n          </DropdownMenuItem>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  )\n}\n\n// PromptInputButton Component\ninterface PromptInputButtonProps {\n  variant?: 'default' | 'ghost'\n  onClick?: () => void\n  children: React.ReactNode\n  className?: string\n}\n\nexport function PromptInputButton({\n  variant = 'ghost',\n  onClick,\n  children,\n  className,\n}: PromptInputButtonProps) {\n  return (\n    <Button\n      type=\"button\"\n      variant={variant}\n      size=\"icon\"\n      className={cn(\n        \"hover:bg-muted h-8 w-auto px-2 gap-1\",\n        className\n      )}\n      onClick={onClick}\n    >\n      {children}\n    </Button>\n  )\n}\n\n// ChatOptions Component\ninterface ChatOptionsProps {\n  children?: React.ReactNode\n  className?: string\n}\n\nexport function ChatOptions({ children, className }: ChatOptionsProps) {\n  if (!children) return null\n  \n  return (\n    <div className={cn(\"flex items-center gap-3\", className)} data-chat=\"options\">\n      {children}\n    </div>\n  )\n}\n\n// Message Interface\nexport interface ChatMessage {\n  id: string\n  role: \"user\" | \"assistant\"\n  content: string\n  isStreaming?: boolean\n  reasoning?: boolean\n  file?: {\n    name: string\n    type: string\n    url?: string\n    size?: number\n  }\n}\n\n// File Message Component\ninterface ChatFileMessageProps {\n  file: NonNullable<ChatMessage['file']>\n  className?: string\n}\n\nexport function ChatFileMessage({\n  file,\n  className,\n}: ChatFileMessageProps) {\n  const isImage = file.type.startsWith('image/')\n  \n  return (\n    <div className={cn(\"flex flex-row-reverse gap-3 mb-2\", className)}>\n      <Avatar className=\"h-8 w-8 rounded-sm\">\n        <AvatarImage src=\"https://patrickprunty.com/icon.webp\" />\n        <AvatarFallback>\n          <User className=\"h-4 w-4\" />\n        </AvatarFallback>\n      </Avatar>\n      <div className=\"ml-auto max-w-[80%] flex items-center gap-2\">\n        {isImage && file.url ? (\n          <div className=\"relative\">\n            <img\n              src={file.url}\n              alt={file.name}\n              className=\"max-w-[200px] max-h-[150px] rounded-lg border object-cover\"\n              style={{ aspectRatio: 'auto' }}\n            />\n          </div>\n        ) : (\n          <div className=\"bg-muted flex items-center gap-3 rounded-lg border p-3\">\n            <div className=\"bg-muted-foreground/20 flex h-10 w-10 items-center justify-center rounded\">\n              <FileText className=\"h-5 w-5\" />\n            </div>\n            <div className=\"flex flex-col\">\n              <span className=\"text-sm font-medium truncate max-w-[120px]\">{file.name}</span>\n              <span className=\"text-xs text-muted-foreground uppercase\">\n                {file.type.split('/')[1] || 'FILE'}\n              </span>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\n// User Message Component\ninterface ChatUserMessageProps {\n  message: ChatMessage\n  userAvatar?: string\n  className?: string\n}\n\nexport function ChatUserMessage({\n  message,\n  userAvatar = \"https://patrickprunty.com/icon.webp\",\n  className,\n}: ChatUserMessageProps) {\n  return (\n    <div className={cn(\"flex flex-row-reverse gap-3\", className)}>\n      <Avatar className=\"h-8 w-8 rounded-sm\">\n        <AvatarImage src={userAvatar} />\n        <AvatarFallback>\n          <User className=\"h-4 w-4\" />\n        </AvatarFallback>\n      </Avatar>\n      <div className=\"bg-primary text-primary-foreground ml-auto max-w-[80%] rounded-lg px-3 py-2\">\n        <p className=\"text-sm whitespace-pre-wrap\">{message?.content}</p>\n      </div>\n    </div>\n  )\n}\n\n// Assistant Message Component\ninterface ChatAssistantMessageProps {\n  message: ChatMessage\n  className?: string\n}\n\nexport function ChatAssistantMessage({\n  message,\n  className,\n}: ChatAssistantMessageProps) {\n  return (\n    <div className={cn(\"flex flex-row gap-3\", className)}>\n      <div className={cn(\"w-full\", className)}>\n        <div className=\"[&>code]:bg-muted [&_div[data-streamdown='code-block']]:!bg-muted [&_div[data-streamdown='code-block']>pre]:!bg-muted text-sm [&>*]:my-1 [&>*:first-child]:mt-0 [&>*:last-child]:mb-0 [&>code]:rounded [&>code]:px-1\">\n          {message?.reasoning && (\n            <div className=\"text-muted-foreground mb-2\">\n              <ChatReasoning text=\"Thinking...\" className=\"text-xs\" />\n            </div>\n          )}\n          {message?.isStreaming ? (\n            <ChatStreamingResponse content={message.content} />\n          ) : (\n            <ChatResponse>{message?.content || \"\"}</ChatResponse>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\n// Welcome Section Component\ninterface ChatWelcomeProps {\n  children?: React.ReactNode\n  className?: string\n}\n\nexport function ChatWelcome({ children, className }: ChatWelcomeProps) {\n  if (children) {\n    return (\n      <div className={cn(\"py-8 text-center\", className)}>\n        {children}\n      </div>\n    )\n  }\n\n  return (\n    <div className={cn(\"text-foreground py-8 text-center\", className)}>\n      <div className=\"bg-muted mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full\">\n        <Bot className=\"h-6 w-6\" />\n      </div>\n      <h2 className=\"text-xl font-semibold\">What&apos;s new?</h2>\n    </div>\n  )\n}\n\n// Conversation Container Component (like Conversation)\ninterface ConversationProps {\n  children: React.ReactNode\n  className?: string\n}\n\nexport function Conversation({ children, className }: ConversationProps) {\n  return (\n    <div className={cn(\"flex h-full w-full flex-col\", className)}>\n      {children}\n    </div>\n  )\n}\n\n// Conversation Content Component\ninterface ConversationContentProps {\n  children: React.ReactNode\n  className?: string\n}\n\nexport function ConversationContent({ children, className }: ConversationContentProps) {\n  return (\n    <div\n      className={cn(\n        \"[&::-webkit-scrollbar-thumb]:bg-muted-foreground/40 hover:[&::-webkit-scrollbar-thumb]:bg-muted-foreground/60 flex-1 overflow-y-auto [&::-webkit-scrollbar]:w-[6px] [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-transparent\",\n        className\n      )}\n    >\n      <div className=\"space-y-4 px-4 py-4\">\n        {children}\n      </div>\n    </div>\n  )\n}\n\n// Conversation Scroll Button Component\ninterface ConversationScrollButtonProps {\n  className?: string\n  targetRef?: React.RefObject<HTMLElement>\n}\n\nexport function ConversationScrollButton({ className, targetRef }: ConversationScrollButtonProps) {\n  const [showScrollButton, setShowScrollButton] = useState(false)\n  const scrollContainerRef = useRef<HTMLElement | null>(null)\n\n  React.useEffect(() => {\n    const container = targetRef?.current || scrollContainerRef.current?.closest('[class*=\"overflow-y-auto\"]')\n    if (!container) return\n\n    scrollContainerRef.current = container as HTMLElement\n\n    const handleScroll = () => {\n      const { scrollTop, scrollHeight, clientHeight } = container\n      const isNearBottom = scrollHeight - scrollTop - clientHeight < 100\n      setShowScrollButton(!isNearBottom)\n    }\n\n    container.addEventListener('scroll', handleScroll)\n    handleScroll() // Initial check\n\n    return () => container.removeEventListener('scroll', handleScroll)\n  }, [targetRef])\n\n  const scrollToBottom = () => {\n    const container = scrollContainerRef.current\n    if (container) {\n      container.scrollTo({\n        top: container.scrollHeight,\n        behavior: 'smooth'\n      })\n    }\n  }\n\n  if (!showScrollButton) return null\n\n  return (\n    <div className={cn(\"absolute bottom-20 right-4 z-10\", className)}>\n      <Button\n        variant=\"secondary\"\n        size=\"icon\"\n        className=\"h-8 w-8 rounded-full shadow-lg\"\n        onClick={scrollToBottom}\n      >\n        <ArrowDown className=\"h-4 w-4\" />\n      </Button>\n    </div>\n  )\n}\n\n// Message Component (wrapper for individual messages)\ninterface MessageProps {\n  from: 'user' | 'assistant'\n  children: React.ReactNode\n  className?: string\n}\n\nexport function Message({ from, children, className }: MessageProps) {\n  return (\n    <div className={cn(\"message-container\", `message-${from}`, className)}>\n      {children}\n    </div>\n  )\n}\n\n// Message Content Component\ninterface MessageContentProps {\n  children: React.ReactNode\n  className?: string\n}\n\nexport function MessageContent({ children, className }: MessageContentProps) {\n  return (\n    <div className={className}>\n      {children}\n    </div>\n  )\n}\n\n// Message Avatar Component\ninterface MessageAvatarProps {\n  src?: string\n  name?: string\n  className?: string\n}\n\nexport function MessageAvatar({ src, name, className }: MessageAvatarProps) {\n  return (\n    <Avatar className={cn(\"h-8 w-8 rounded-sm\", className)}>\n      <AvatarImage src={src} alt={name} />\n      <AvatarFallback>\n        <User className=\"h-4 w-4\" />\n      </AvatarFallback>\n    </Avatar>\n  )\n}\n\n// Messages Container Component (legacy compatibility)\ninterface ChatMessagesProps {\n  messages: ChatMessage[]\n  isLoading: boolean\n  userAvatar?: string\n  className?: string\n  previousMessages?: ChatMessage[]\n  welcomeContent?: React.ReactNode\n}\n\nexport function ChatMessages({\n  messages,\n  isLoading,\n  userAvatar = \"https://patrickprunty.com/icon.webp\",\n  className,\n  previousMessages = [],\n  welcomeContent,\n}: ChatMessagesProps) {\n  const allMessages = [...previousMessages, ...messages]\n  const hasAnyMessages = allMessages.length > 0\n\n  return (\n    <Conversation className={className}>\n      <ConversationContent>\n        {!hasAnyMessages && (\n          <ChatWelcome>{welcomeContent}</ChatWelcome>\n        )}\n\n        {allMessages.map((message) => {\n          // Render file message first if it exists\n          const elements = []\n          \n          if (message.file && message.role === 'user') {\n            elements.push(\n              <ChatFileMessage\n                key={`${message.id}-file`}\n                file={message.file}\n              />\n            )\n          }\n          \n          // Then render the text message\n          if (message.role === \"user\") {\n            elements.push(\n              <Message key={message.id} from=\"user\">\n                <div className=\"flex flex-row-reverse gap-3\">\n                  <MessageAvatar src={userAvatar} name=\"User\" />\n                  <MessageContent>\n                    <div className=\"bg-primary text-primary-foreground ml-auto max-w-[80%] rounded-lg px-3 py-2\">\n                      <p className=\"text-sm whitespace-pre-wrap\">{message?.content}</p>\n                    </div>\n                  </MessageContent>\n                </div>\n              </Message>\n            )\n          } else {\n            elements.push(\n              <Message key={message.id} from=\"assistant\">\n                <ChatAssistantMessage message={message} />\n              </Message>\n            )\n          }\n          \n          return elements\n        }).flat()}\n\n        {isLoading && (\n          <Message from=\"assistant\">\n            <div className=\"flex gap-3\">\n              <div className=\"w-full\">\n                <div className=\"flex items-center gap-1\">\n                  <div className=\"bg-muted-foreground h-2 w-2 animate-bounce rounded-full\" />\n                  <div\n                    className=\"bg-muted-foreground h-2 w-2 animate-bounce rounded-full\"\n                    style={{ animationDelay: \"0.1s\" }}\n                  />\n                  <div\n                    className=\"bg-muted-foreground h-2 w-2 animate-bounce rounded-full\"\n                    style={{ animationDelay: \"0.2s\" }}\n                  />\n                </div>\n              </div>\n            </div>\n          </Message>\n        )}\n      </ConversationContent>\n      <ConversationScrollButton />\n    </Conversation>\n  )\n}\n\n// PromptInput Component (new structure)\ninterface PromptInputProps {\n  onSubmit: (e: React.FormEvent) => void\n  children: React.ReactNode\n  className?: string\n}\n\nexport function PromptInput({ onSubmit, children, className }: PromptInputProps) {\n  return (\n    <div className={cn(\"px-4 pb-4\", className)} data-chat=\"prompt-input\">\n      <form onSubmit={onSubmit} className=\"space-y-3\">\n        {children}\n      </form>\n    </div>\n  )\n}\n\n// PromptInputTextarea Component\ninterface PromptInputTextareaProps {\n  value: string\n  onChange: (e: React.ChangeEvent<HTMLTextAreaElement>) => void\n  placeholder?: string\n  className?: string\n  attachedFile?: File | null\n  filePreviewUrl?: string | null\n  onRemoveFile?: () => void\n  isDragOver?: boolean\n  onDragOver?: (e: React.DragEvent) => void\n  onDragLeave?: (e: React.DragEvent) => void\n  onDrop?: (e: React.DragEvent) => void\n  allowFileUpload?: boolean\n}\n\nexport function PromptInputTextarea({\n  value,\n  onChange,\n  placeholder = \"How can I help today?\",\n  className,\n  attachedFile,\n  filePreviewUrl,\n  onRemoveFile,\n  isDragOver,\n  onDragOver,\n  onDragLeave,\n  onDrop,\n  allowFileUpload = false,\n}: PromptInputTextareaProps) {\n  const textareaRef = useRef<HTMLTextAreaElement>(null)\n\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n      if (e.key === \"Enter\" && !e.shiftKey) {\n        e.preventDefault()\n        // Let the parent form handle submission\n        const form = e.currentTarget.closest('form')\n        if (form && value.trim()) {\n          const submitEvent = new Event('submit', { bubbles: true, cancelable: true })\n          form.dispatchEvent(submitEvent)\n        }\n        return\n      }\n    },\n    [value]\n  )\n\n  // Calculate dynamic height based on content\n  const dynamicHeight = useMemo(() => {\n    let baseHeight = 140 // min-h-[140px]\n    if (attachedFile) {\n      baseHeight += 80 // Extra height for file preview\n    }\n    return `${baseHeight}px`\n  }, [attachedFile])\n\n  return (\n    <div\n      className={cn(\n        \"relative\",\n        isDragOver && \"ring-primary rounded-xl ring-2 ring-offset-2\"\n      )}\n      onDragOver={onDragOver}\n      onDragLeave={onDragLeave}\n      onDrop={onDrop}\n    >\n      <div className=\"relative\">\n        <Textarea\n          ref={textareaRef}\n          value={value}\n          onChange={onChange}\n          onKeyDown={handleKeyDown}\n          placeholder={\n            attachedFile\n              ? \"Describe what you'd like to do with this file...\"\n              : placeholder\n          }\n          className={cn(\n            \"bg-surface border-input focus:bg-surface resize-none rounded-xl\",\n            allowFileUpload ? \"pr-20 pb-10\" : \"pr-12 pb-10\",\n            attachedFile && \"pt-24\",\n            className\n          )}\n          data-chat=\"textarea\"\n          style={{ minHeight: dynamicHeight }}\n          rows={5}\n        />\n        \n        {attachedFile && (\n          <div className=\"absolute top-2 left-2 z-10\">\n            <div className=\"group relative\">\n              {filePreviewUrl && attachedFile.type.startsWith(\"image/\") ? (\n                // Image preview with natural aspect ratio\n                <div className=\"relative\">\n                  <img\n                    src={filePreviewUrl}\n                    alt={attachedFile.name}\n                    className=\"max-w-[120px] max-h-[80px] rounded-lg border object-cover\"\n                    style={{ aspectRatio: 'auto' }}\n                  />\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"bg-background hover:bg-muted absolute -top-2 -right-2 h-6 w-6 rounded-full border shadow-sm\"\n                    onClick={onRemoveFile}\n                  >\n                    <X className=\"h-3 w-3\" />\n                  </Button>\n                </div>\n              ) : (\n                // Non-image files with filename and type\n                <div className=\"relative\">\n                  <div className=\"bg-muted/50 flex items-center gap-2 rounded-lg border p-2 pr-8\">\n                    <div className=\"bg-muted-foreground/20 flex h-8 w-8 items-center justify-center rounded\">\n                      <FileText className=\"h-4 w-4\" />\n                    </div>\n                    <div className=\"flex flex-col\">\n                      <span className=\"text-xs font-medium truncate max-w-[80px]\">{attachedFile.name}</span>\n                      <span className=\"text-xs text-muted-foreground uppercase\">\n                        {attachedFile.type.split('/')[1] || 'FILE'}\n                      </span>\n                    </div>\n                  </div>\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"bg-background hover:bg-muted absolute -top-2 -right-2 h-6 w-6 rounded-full border shadow-sm\"\n                    onClick={onRemoveFile}\n                  >\n                    <X className=\"h-3 w-3\" />\n                  </Button>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\n// PromptInputToolbar Component\ninterface PromptInputToolbarProps {\n  children: React.ReactNode\n  className?: string\n}\n\nexport function PromptInputToolbar({ children, className }: PromptInputToolbarProps) {\n  return (\n    <div className={cn(\"absolute bottom-2 left-2 z-10\", className)}>\n      {children}\n    </div>\n  )\n}\n\n// PromptInputSubmit Component\ninterface PromptInputSubmitProps {\n  disabled?: boolean\n  isLoading?: boolean\n  className?: string\n  allowFileUpload?: boolean\n}\n\nexport function PromptInputSubmit({ disabled, isLoading, className, allowFileUpload = false }: PromptInputSubmitProps) {\n  return (\n    <div className=\"absolute right-2 bottom-2 z-10 flex items-center gap-1\">\n      {allowFileUpload && (\n        <Button\n          type=\"button\"\n          variant=\"ghost\"\n          size=\"icon\"\n          className=\"hover:bg-muted h-8 w-8\"\n          onClick={() => {\n            // Trigger file input\n            const fileInput = document.querySelector('input[type=\"file\"]') as HTMLInputElement\n            fileInput?.click()\n          }}\n        >\n          <Paperclip className=\"text-muted-foreground hover:text-foreground h-4 w-4 transition-colors\" />\n        </Button>\n      )}\n      <ChatSendButton\n        isDisabled={disabled || false}\n        isLoading={isLoading || false}\n        className={className}\n      />\n    </div>\n  )\n}\n\n// Legacy ChatPromptInput Component for backward compatibility\ninterface ChatPromptInputProps {\n  input: string\n  onInputChange: (value: string) => void\n  onSubmit: (e: React.FormEvent) => void\n  isLoading: boolean\n  selectedModel: string\n  onModelChange: (modelId: string) => void\n  models: Model[]\n  className?: string\n  allowFileUpload?: boolean\n  onFileUpload?: (file: File) => void\n  children?: React.ReactNode\n}\n\nexport function ChatPromptInput({\n  input,\n  onInputChange,\n  onSubmit,\n  isLoading,\n  selectedModel,\n  onModelChange,\n  models,\n  className,\n  allowFileUpload = false,\n  onFileUpload,\n  children,\n}: ChatPromptInputProps) {\n  const fileInputRef = useRef<HTMLInputElement>(null)\n  const [attachedFile, setAttachedFile] = useState<File | null>(null)\n  const [filePreviewUrl, setFilePreviewUrl] = useState<string | null>(null)\n  const [isDragOver, setIsDragOver] = useState(false)\n\n  const handleFileSelect = useCallback(\n    (file: File) => {\n      setAttachedFile(file)\n\n      // Create preview URL for images and PDFs\n      if (file.type.startsWith(\"image/\") || file.type === \"application/pdf\") {\n        const url = URL.createObjectURL(file)\n        setFilePreviewUrl(url)\n      } else {\n        setFilePreviewUrl(null)\n      }\n\n      onFileUpload?.(file)\n    },\n    [onFileUpload]\n  )\n\n  const handleFileInputChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const file = e.target.files?.[0]\n      if (file) {\n        handleFileSelect(file)\n      }\n    },\n    [handleFileSelect]\n  )\n\n  const handleRemoveFile = useCallback(() => {\n    // Clean up preview URL to prevent memory leaks\n    if (filePreviewUrl) {\n      URL.revokeObjectURL(filePreviewUrl)\n      setFilePreviewUrl(null)\n    }\n\n    setAttachedFile(null)\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\"\n    }\n  }, [filePreviewUrl])\n\n  const handleDragOver = useCallback(\n    (e: React.DragEvent) => {\n      e.preventDefault()\n      if (allowFileUpload) {\n        setIsDragOver(true)\n      }\n    },\n    [allowFileUpload]\n  )\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault()\n    setIsDragOver(false)\n  }, [])\n\n  const handleDrop = useCallback(\n    (e: React.DragEvent) => {\n      e.preventDefault()\n      setIsDragOver(false)\n\n      if (!allowFileUpload) return\n\n      const files = Array.from(e.dataTransfer.files)\n      const file = files[0]\n      if (file) {\n        handleFileSelect(file)\n      }\n    },\n    [allowFileUpload, handleFileSelect]\n  )\n\n  // Cleanup preview URL on unmount\n  React.useEffect(() => {\n    return () => {\n      if (filePreviewUrl) {\n        URL.revokeObjectURL(filePreviewUrl)\n      }\n    }\n  }, [filePreviewUrl])\n\n  return (\n    <PromptInput onSubmit={onSubmit} className={className}>\n      <PromptInputTextarea\n        value={input}\n        onChange={(e) => onInputChange(e.target.value)}\n        attachedFile={attachedFile}\n        filePreviewUrl={filePreviewUrl}\n        onRemoveFile={handleRemoveFile}\n        isDragOver={isDragOver}\n        onDragOver={handleDragOver}\n        onDragLeave={handleDragLeave}\n        onDrop={handleDrop}\n        allowFileUpload={allowFileUpload}\n      />\n      \n      {allowFileUpload && (\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          className=\"hidden\"\n          onChange={handleFileInputChange}\n          accept=\"*/*\"\n        />\n      )}\n\n      <PromptInputToolbar>\n        {children && (\n          <>\n            {React.Children.map(children, (child) => {\n              // If it's a ChatOptions component, render it with model selector\n              if (React.isValidElement(child) && child.type === ChatOptions) {\n                return (\n                  <div className=\"flex items-center gap-3\">\n                    {(child.props as any).children}\n                    <ChatModelSelector\n                      selectedModel={selectedModel}\n                      onModelChange={onModelChange}\n                      models={models}\n                    />\n                  </div>\n                )\n              }\n              return null\n            })}\n          </>\n        )}\n        {!children && (\n          <ChatModelSelector\n            selectedModel={selectedModel}\n            onModelChange={onModelChange}\n            models={models}\n          />\n        )}\n      </PromptInputToolbar>\n\n      <div className=\"absolute right-2 bottom-2 z-10 flex items-center gap-1\">\n        {allowFileUpload && (\n          <Button\n            type=\"button\"\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"hover:bg-muted h-8 w-8\"\n            onClick={() => fileInputRef.current?.click()}\n          >\n            <Paperclip className=\"text-muted-foreground hover:text-foreground h-4 w-4 transition-colors\" />\n          </Button>\n        )}\n        <PromptInputSubmit\n          disabled={!input.trim()}\n          isLoading={isLoading}\n        />\n      </div>\n    </PromptInput>\n  )\n}\n"
    }
  ]
}