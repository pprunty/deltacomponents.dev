---
title: Code Block
description: A versatile code block component supporting package manager commands, syntax highlighting with themes, and markdown-wrapped code strings.
---

<ComponentPreview name="code-block-demo" />

## Installation

<Installation
  name="code-block"
  dependencies={["lucide-react", "prism-react-renderer", "prismjs"]}
/>

<Admonition type="warning" title="Required CSS">
Define `--surface` and `.no-scrollbar` in your `globals.css`:

```css
:root {
  --surface: #fafafa; /* Light mode */
}

.dark {
  --surface: #171717; /* Dark mode */
}

.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
```

The `--surface` variable enables `bg-surface` styling. The `.no-scrollbar` class hides scrollbars when `scrollbar={false}` (default).
</Admonition>

## Usage

### Standard Code String

```tsx
import { CodeBlock } from "@/components/ui/code-block"

export default function Example() {
  return (
    <CodeBlock
      code={`print("Hello, World!")`}
      language="python"
      filename="hello.py"
      showLineNumbers={true}
    />
  )
}
```

### Markdown-Wrapped Code String

```tsx
import { CodeBlock } from "@/components/ui/code-block"

const markdownCode = `\`\`\`python
print("Hello, World!")
\`\`\``

export default function Example() {
  return <CodeBlock code={markdownCode} filename="hello.py" />
}
```

### MDX Integration (Contentlayer/Fumadocs)

To automatically render all code blocks in your MDX files with the CodeBlock component, configure your `mdx-components.tsx`:

```tsx title="mdx-components.tsx"
import { CodeBlock } from "@/components/ui/code-block"
import type { MDXComponents } from "mdx/types"

export function useMDXComponents(components: MDXComponents): MDXComponents {
  return {
    ...components,
    pre: ({ children, ...props }) => {
      // Extract code from the pre > code structure
      const code = typeof children === "object" && "props" in children
        ? children.props.children
        : ""

      // Extract language from className (e.g., "language-typescript")
      const className = typeof children === "object" && "props" in children
        ? children.props.className || ""
        : ""
      const language = className.replace(/language-/, "")

      return (
        <CodeBlock
          code={code}
          language={language || "typescript"}
          showLineNumbers={true}
        />
      )
    },
  }
}
```

Now all code blocks in your MDX files will automatically use your CodeBlock component:

```mdx title="example.mdx"
# My Documentation

\`\`\`typescript
const greeting = "Hello, World!"
console.log(greeting)
\`\`\`
```

For package manager commands, use the language identifier to trigger automatic conversion:

```mdx title="installation.mdx"
\`\`\`npm
npx shadcn@latest add button
\`\`\`
```

The CodeBlock component will automatically:
- Parse the markdown code fence syntax (\`\`\`language)
- Extract the language identifier
- Apply syntax highlighting
- Convert package manager commands to tabbed interfaces

## Features

- **Dual Mode**: Package manager commands or syntax-highlighted code
- **Syntax Highlighting**: Powered by Prism with custom themes
- **Package Manager Tabs**: Support for npm, yarn, pnpm, and bun
- **Copy to Clipboard**: One-click copy functionality with visual feedback
- **Line Numbers**: Optional line numbering for code blocks
- **Custom Themes**: Light/dark adaptive themes with hover effects
- **Background Options**: Choose between surface background or JSON theme background
- **Terminal Styling**: Command-line interface appearance
- **Responsive**: Horizontal scrolling for long content
- **Flexible**: Shows only provided package managers or code content

## Examples

### Custom Themes with Background

Apply adaptive themes with `useThemeBackground` to use theme-defined backgrounds instead of `bg-surface`:

<ComponentPreview name="code-block-python-demo" height="700px" />

### JSON Syntax Highlighting

Display formatted JSON data with syntax highlighting:

<ComponentPreview name="code-block-json-demo" height="700px" />

### Expandable Code Blocks

Handle long code snippets with expand/collapse functionality:

<ComponentPreview name="code-block-expand-demo" align="start" />

### Interactive Theme Demo

<ComponentPreview name="code-block-theme-demo" />

Cycle through Prism themes with background toggle to compare `bg-surface` vs. `useThemeBackground` behavior.

### Markdown Code Strings

Parse and render markdown-formatted code blocks:

<ComponentPreview name="code-block-markdown-string-demo" />

### NPX Commands

Handle package manager commands in markdown:

<ComponentPreview name="code-block-npx-markdown-demo" />

### Package Manager Commands

<ComponentPreview name="code-block-package-demo" />

Alternatively, use individual props for package managers:

<ComponentPreview name="code-block-package-manager-demo" />

## API Reference

### Props

| Prop                        | Type           | Default      | Description                                                    |
| --------------------------- | -------------- | ------------ | -------------------------------------------------------------- |
| **Package Manager Props**   |                |              |                                                                |
| npm                         | string         | -            | npm command                                                    |
| yarn                        | string         | -            | yarn command                                                   |
| pnpm                        | string         | -            | pnpm command                                                   |
| bun                         | string         | -            | bun command                                                    |
| defaultPackageManager       | PackageManager | "npm"        | Default tab selection                                          |
| **Code Highlighting Props** |                |              |                                                                |
| code                        | string         | -            | Code content (supports markdown-wrapped code blocks)           |
| language                    | string         | "typescript" | Language for syntax highlighting                               |
| filename                    | string         | -            | Optional filename display                                      |
| showLineNumbers             | boolean        | true         | Toggle line numbers                                            |
| theme                       | PrismTheme     | -            | Prism theme object                                             |
| adaptiveTheme               | object         | -            | `{ light: PrismTheme, dark: PrismTheme }` for theme switching  |
| useThemeBackground          | boolean        | false        | Apply theme's `backgroundColor` instead of `bg-surface`        |
| scrollbar                   | boolean        | false        | Show scrollbars (applies `.no-scrollbar` class when false)     |
| **General Props**           |                |              |                                                                |
| className                   | string         | -            | Additional CSS classes                                         |

### Background Behavior

- **Default (`useThemeBackground={false}`)**: Uses `bg-surface` CSS variable
- **Theme Background (`useThemeBackground={true}`)**: Uses `theme.plain.backgroundColor` from Prism theme
- Requires `--surface` CSS variable definition for default mode

### Types

```tsx
type PackageManager = "npm" | "yarn" | "pnpm" | "bun"

interface AdaptiveTheme {
  light: PrismTheme
  dark: PrismTheme
}
```

### Theme Structure

Custom themes follow the Prism theme structure:

```tsx
const customTheme: PrismTheme = {
  plain: {
    color: "#e6e6fa",
    backgroundColor: "#1a1a2e",
  },
  styles: [
    {
      types: ["comment"],
      style: {
        color: "#6a7b9a",
        fontStyle: "italic",
      },
    },
    // ... more styles
  ],
}
```
