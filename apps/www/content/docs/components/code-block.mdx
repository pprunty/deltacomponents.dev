---
title: Code Block
description: A versatile code block component supporting package manager commands, syntax highlighting with themes, and markdown-wrapped code strings.
---

<ComponentPreview name="code-block-demo" />

## Installation

<Installation
  name="code-block"
  dependencies={["lucide-react", "prism-react-renderer", "prismjs"]}
/>

<Admonition type="warning" title="Required Global CSS">
This component relies on two essential global CSS definitions for theming and scrollbar management:

```css
:root {
  --surface: #fafafa; /* Light mode fallback for bg-surface */
}

.dark {
  --surface: #171717; /* Dark mode background for bg-surface */
}

/* Hides scrollbars when scrollbar={false} (default) */
.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.no-scrollbar {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}
```

The `--surface` variable enables light/dark mode adaptive styling when `useThemeBackground` is set to false.
</Admonition>

## Usage

### Standard Code String

Pass the code content and the desired language for syntax highlighting.

```tsx
import { CodeBlock } from "@/components/ui/code-block"

export default function Example() {
  return (
    <CodeBlock
      code={`print("Hello, World!")`}
      language="python"
      filename="hello.py"
      showLineNumbers={true}
    />
  )
}
```

### Package Manager Commands

The component automatically switches to a tabbed interface if any package manager props (`npm`, `yarn`, `pnpm`, `bun`) are provided.

```tsx
import { CodeBlock } from "@/components/ui/code-block"

export default function InstallExample() {
  return (
    <CodeBlock
      npm="npm install delta-components-ui"
      yarn="yarn add delta-components-ui"
      pnpm="pnpm add delta-components-ui"
    />
  )
}
```


## Examples

### Markdown Integration

If your code string contains a markdown code fence (e.g., ```typescript\n...\n```), the component can parse the language and content automatically.

<ComponentPreview name="code-block-markdown-string-demo" />

### MDX Transformer (Contentlayer/Fumadocs)

For documentation sites (like those using Contentlayer or Fumadocs), you can transform all native markdown `<pre>` blocks into the enhanced `CodeBlock` component.

```tsx title="mdx-components.tsx"
import { CodeBlock } from "@/components/ui/code-block"
import type { MDXComponents } from "mdx/types"

export function useMDXComponents(components: MDXComponents): MDXComponents {
  return {
    ...components,
    pre: ({ children, ...props }) => {
      // Basic logic to extract code and language from markdown structure
      const code = typeof children === "object" && "props" in children
        ? children.props.children
        : ""
      
      const className = typeof children === "object" && "props" in children
        ? children.props.className || ""
        : ""
      const language = className.replace(/language-/, "")

      return (
        <CodeBlock
          code={code}
          language={language || "typescript"}
          showLineNumbers={true}
        />
      )
    },
  }
}
```

### Theme Background Toggle

Use `useThemeBackground={true}` to apply the specific background color defined within your Prism theme, overriding the default adaptive `--surface` variable.

<ComponentPreview name="code-block-python-demo" height="700px" />

### JSON Syntax Highlighting

Display formatted JSON data with syntax highlighting:

<ComponentPreview name="code-block-json-demo" height="700px" />

### Expandable Code Blocks

Handle long code snippets with expand/collapse functionality:

<ComponentPreview name="code-block-expand-demo" align="start" />

### Interactive Theme Demo

<ComponentPreview name="code-block-theme-demo" />

Cycle through Prism themes with background toggle to compare `bg-surface` vs. `useThemeBackground` behavior.


### NPX Commands

Handle package manager commands in markdown:

<ComponentPreview name="code-block-npx-markdown-demo" />

### Package Manager Commands

<ComponentPreview name="code-block-package-demo" />

Alternatively, use individual props for package managers:

<ComponentPreview name="code-block-package-manager-demo" />

## API Reference

### Props

| Prop                        | Type           | Default      | Description                                                    |
| --------------------------- | -------------- | ------------ | -------------------------------------------------------------- |
| **Package Manager Props**   |                |              |                                                                |
| npm                         | string         | -            | npm command                                                    |
| yarn                        | string         | -            | yarn command                                                   |
| pnpm                        | string         | -            | pnpm command                                                   |
| bun                         | string         | -            | bun command                                                    |
| defaultPackageManager       | PackageManager | "npm"        | Default tab selection                                          |
| **Code Highlighting Props** |                |              |                                                                |
| code                        | string         | -            | Code content (supports markdown-wrapped code blocks)           |
| language                    | string         | "typescript" | Language for syntax highlighting                               |
| filename                    | string         | -            | Optional filename display                                      |
| showLineNumbers             | boolean        | true         | Toggle line numbers                                            |
| theme                       | PrismTheme     | -            | Prism theme object                                             |
| adaptiveTheme               | object         | -            | `{ light: PrismTheme, dark: PrismTheme }` for theme switching  |
| useThemeBackground          | boolean        | false        | Apply theme's `backgroundColor` instead of `bg-surface`        |
| scrollbar                   | boolean        | false        | Show scrollbars (applies `.no-scrollbar` class when false)     |
| **General Props**           |                |              |                                                                |
| className                   | string         | -            | Additional CSS classes                                         |

### Background Behavior

- **Default (`useThemeBackground={false}`)**: Uses `bg-surface` CSS variable
- **Theme Background (`useThemeBackground={true}`)**: Uses `theme.plain.backgroundColor` from Prism theme
- Requires `--surface` CSS variable definition for default mode

### Types

```tsx
type PackageManager = "npm" | "yarn" | "pnpm" | "bun"

interface AdaptiveTheme {
  light: PrismTheme
  dark: PrismTheme
}
```

### Theme Structure

Custom themes follow the Prism theme structure:

```tsx
const customTheme: PrismTheme = {
  plain: {
    color: "#e6e6fa",
    backgroundColor: "#1a1a2e",
  },
  styles: [
    {
      types: ["comment"],
      style: {
        color: "#6a7b9a",
        fontStyle: "italic",
      },
    },
    // ... more styles
  ],
}
```
